{"ast":null,"code":"import { Adder } from \"d3-array\";\nimport { abs, atan2, cos, radians, sin, sqrt } from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\nvar lengthSum, lambda0, sinPhi0, cosPhi0;\nvar lengthStream = {\n  sphere: noop,\n  point: noop,\n  lineStart: lengthLineStart,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop\n};\nfunction lengthLineStart() {\n  lengthStream.point = lengthPointFirst;\n  lengthStream.lineEnd = lengthLineEnd;\n}\nfunction lengthLineEnd() {\n  lengthStream.point = lengthStream.lineEnd = noop;\n}\nfunction lengthPointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, sinPhi0 = sin(phi), cosPhi0 = cos(phi);\n  lengthStream.point = lengthPoint;\n}\nfunction lengthPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var sinPhi = sin(phi),\n    cosPhi = cos(phi),\n    delta = abs(lambda - lambda0),\n    cosDelta = cos(delta),\n    sinDelta = sin(delta),\n    x = cosPhi * sinDelta,\n    y = cosPhi0 * sinPhi - sinPhi0 * cosPhi * cosDelta,\n    z = sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosDelta;\n  lengthSum.add(atan2(sqrt(x * x + y * y), z));\n  lambda0 = lambda, sinPhi0 = sinPhi, cosPhi0 = cosPhi;\n}\nexport default function (object) {\n  lengthSum = new Adder();\n  stream(object, lengthStream);\n  return +lengthSum;\n}","map":{"version":3,"names":["Adder","abs","atan2","cos","radians","sin","sqrt","noop","stream","lengthSum","lambda0","sinPhi0","cosPhi0","lengthStream","sphere","point","lineStart","lengthLineStart","lineEnd","polygonStart","polygonEnd","lengthPointFirst","lengthLineEnd","lambda","phi","lengthPoint","sinPhi","cosPhi","delta","cosDelta","sinDelta","x","y","z","add","object"],"sources":["D:/desk/数据可视化/project/xuxiake/node_modules/d3-geo/src/length.js"],"sourcesContent":["import {Adder} from \"d3-array\";\r\nimport {abs, atan2, cos, radians, sin, sqrt} from \"./math.js\";\r\nimport noop from \"./noop.js\";\r\nimport stream from \"./stream.js\";\r\n\r\nvar lengthSum,\r\n    lambda0,\r\n    sinPhi0,\r\n    cosPhi0;\r\n\r\nvar lengthStream = {\r\n  sphere: noop,\r\n  point: noop,\r\n  lineStart: lengthLineStart,\r\n  lineEnd: noop,\r\n  polygonStart: noop,\r\n  polygonEnd: noop\r\n};\r\n\r\nfunction lengthLineStart() {\r\n  lengthStream.point = lengthPointFirst;\r\n  lengthStream.lineEnd = lengthLineEnd;\r\n}\r\n\r\nfunction lengthLineEnd() {\r\n  lengthStream.point = lengthStream.lineEnd = noop;\r\n}\r\n\r\nfunction lengthPointFirst(lambda, phi) {\r\n  lambda *= radians, phi *= radians;\r\n  lambda0 = lambda, sinPhi0 = sin(phi), cosPhi0 = cos(phi);\r\n  lengthStream.point = lengthPoint;\r\n}\r\n\r\nfunction lengthPoint(lambda, phi) {\r\n  lambda *= radians, phi *= radians;\r\n  var sinPhi = sin(phi),\r\n      cosPhi = cos(phi),\r\n      delta = abs(lambda - lambda0),\r\n      cosDelta = cos(delta),\r\n      sinDelta = sin(delta),\r\n      x = cosPhi * sinDelta,\r\n      y = cosPhi0 * sinPhi - sinPhi0 * cosPhi * cosDelta,\r\n      z = sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosDelta;\r\n  lengthSum.add(atan2(sqrt(x * x + y * y), z));\r\n  lambda0 = lambda, sinPhi0 = sinPhi, cosPhi0 = cosPhi;\r\n}\r\n\r\nexport default function(object) {\r\n  lengthSum = new Adder();\r\n  stream(object, lengthStream);\r\n  return +lengthSum;\r\n}\r\n"],"mappings":"AAAA,SAAQA,KAAK,QAAO,UAAU;AAC9B,SAAQC,GAAG,EAAEC,KAAK,EAAEC,GAAG,EAAEC,OAAO,EAAEC,GAAG,EAAEC,IAAI,QAAO,WAAW;AAC7D,OAAOC,IAAI,MAAM,WAAW;AAC5B,OAAOC,MAAM,MAAM,aAAa;AAEhC,IAAIC,SAAS,EACTC,OAAO,EACPC,OAAO,EACPC,OAAO;AAEX,IAAIC,YAAY,GAAG;EACjBC,MAAM,EAAEP,IAAI;EACZQ,KAAK,EAAER,IAAI;EACXS,SAAS,EAAEC,eAAe;EAC1BC,OAAO,EAAEX,IAAI;EACbY,YAAY,EAAEZ,IAAI;EAClBa,UAAU,EAAEb;AACd,CAAC;AAED,SAASU,eAAeA,CAAA,EAAG;EACzBJ,YAAY,CAACE,KAAK,GAAGM,gBAAgB;EACrCR,YAAY,CAACK,OAAO,GAAGI,aAAa;AACtC;AAEA,SAASA,aAAaA,CAAA,EAAG;EACvBT,YAAY,CAACE,KAAK,GAAGF,YAAY,CAACK,OAAO,GAAGX,IAAI;AAClD;AAEA,SAASc,gBAAgBA,CAACE,MAAM,EAAEC,GAAG,EAAE;EACrCD,MAAM,IAAInB,OAAO,EAAEoB,GAAG,IAAIpB,OAAO;EACjCM,OAAO,GAAGa,MAAM,EAAEZ,OAAO,GAAGN,GAAG,CAACmB,GAAG,CAAC,EAAEZ,OAAO,GAAGT,GAAG,CAACqB,GAAG,CAAC;EACxDX,YAAY,CAACE,KAAK,GAAGU,WAAW;AAClC;AAEA,SAASA,WAAWA,CAACF,MAAM,EAAEC,GAAG,EAAE;EAChCD,MAAM,IAAInB,OAAO,EAAEoB,GAAG,IAAIpB,OAAO;EACjC,IAAIsB,MAAM,GAAGrB,GAAG,CAACmB,GAAG,CAAC;IACjBG,MAAM,GAAGxB,GAAG,CAACqB,GAAG,CAAC;IACjBI,KAAK,GAAG3B,GAAG,CAACsB,MAAM,GAAGb,OAAO,CAAC;IAC7BmB,QAAQ,GAAG1B,GAAG,CAACyB,KAAK,CAAC;IACrBE,QAAQ,GAAGzB,GAAG,CAACuB,KAAK,CAAC;IACrBG,CAAC,GAAGJ,MAAM,GAAGG,QAAQ;IACrBE,CAAC,GAAGpB,OAAO,GAAGc,MAAM,GAAGf,OAAO,GAAGgB,MAAM,GAAGE,QAAQ;IAClDI,CAAC,GAAGtB,OAAO,GAAGe,MAAM,GAAGd,OAAO,GAAGe,MAAM,GAAGE,QAAQ;EACtDpB,SAAS,CAACyB,GAAG,CAAChC,KAAK,CAACI,IAAI,CAACyB,CAAC,GAAGA,CAAC,GAAGC,CAAC,GAAGA,CAAC,CAAC,EAAEC,CAAC,CAAC,CAAC;EAC5CvB,OAAO,GAAGa,MAAM,EAAEZ,OAAO,GAAGe,MAAM,EAAEd,OAAO,GAAGe,MAAM;AACtD;AAEA,eAAe,UAASQ,MAAM,EAAE;EAC9B1B,SAAS,GAAG,IAAIT,KAAK,CAAC,CAAC;EACvBQ,MAAM,CAAC2B,MAAM,EAAEtB,YAAY,CAAC;EAC5B,OAAO,CAACJ,SAAS;AACnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}