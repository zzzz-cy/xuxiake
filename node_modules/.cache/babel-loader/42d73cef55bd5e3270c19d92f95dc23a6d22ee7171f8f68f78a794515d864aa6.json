{"ast":null,"code":"import * as echarts from 'echarts';\nexport default {\n  name: 'PageOne',\n  data() {\n    return {\n      colors: ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'],\n      bgColor: '#2E2733',\n      itemStyle: {\n        star5: {\n          color: '#FFAE57'\n        },\n        star4: {\n          color: '#FF7853'\n        },\n        star3: {\n          color: '#EA5151'\n        },\n        star2: {\n          color: '#CC3F57'\n        }\n      },\n      data: [{\n        name: '虚构',\n        itemStyle: {\n          color: '#FF7853'\n        },\n        children: [{\n          name: '小说',\n          children: [{\n            name: '5☆',\n            children: [{\n              name: '疼'\n            }, {\n              name: '慈悲'\n            }, {\n              name: '楼下的房客'\n            }]\n          }, {\n            name: '4☆',\n            children: [{\n              name: '虚无的十字架'\n            }, {\n              name: '无声告白'\n            }, {\n              name: '童年的终结'\n            }]\n          }, {\n            name: '3☆',\n            children: [{\n              name: '疯癫老人日记'\n            }]\n          }]\n        }\n        // 省略部分数据\n        ]\n      }, {\n        name: '非虚构',\n        itemStyle: {\n          color: '#EA5151'\n        },\n        children: [{\n          name: '设计',\n          children: [{\n            name: '5☆',\n            children: [{\n              name: '无界面交互'\n            }]\n          }, {\n            name: '4☆',\n            children: [{\n              name: '数字绘图的光照与渲染技术'\n            }, {\n              name: '日本建筑解剖书'\n            }]\n          }, {\n            name: '3☆',\n            children: [{\n              name: '奇幻世界艺术\\n&RPG地图绘制讲座'\n            }]\n          }]\n        }\n        // 省略部分数据\n        ]\n      }]\n    };\n  },\n  mounted() {\n    this.formatData();\n    this.initChart();\n  },\n  methods: {\n    formatData() {\n      const {\n        data,\n        colors,\n        itemStyle\n      } = this;\n      for (let j = 0; j < data.length; ++j) {\n        const level1 = data[j].children;\n        for (let i = 0; i < level1.length; ++i) {\n          const block = level1[i].children;\n          const bookScore = [];\n          let bookScoreId;\n          for (let star = 0; star < block.length; ++star) {\n            let style = function (name) {\n              switch (name) {\n                case '5☆':\n                  bookScoreId = 0;\n                  return itemStyle.star5;\n                case '4☆':\n                  bookScoreId = 1;\n                  return itemStyle.star4;\n                case '3☆':\n                  bookScoreId = 2;\n                  return itemStyle.star3;\n                case '2☆':\n                  bookScoreId = 3;\n                  return itemStyle.star2;\n              }\n            }(block[star].name);\n            block[star].label = {\n              color: style.color,\n              downplay: {\n                opacity: 0.5\n              }\n            };\n            if (block[star].children) {\n              style = {\n                opacity: 1,\n                color: style.color\n              };\n              block[star].children.forEach(book => {\n                book.value = 1;\n                book.itemStyle = style;\n                book.label = {\n                  color: style.color\n                };\n                let value = bookScoreId === 0 || bookScoreId === 3 ? 5 : 1;\n                if (bookScore[bookScoreId]) {\n                  bookScore[bookScoreId].value += value;\n                } else {\n                  bookScore[bookScoreId] = {\n                    color: colors[bookScoreId],\n                    value\n                  };\n                }\n              });\n            }\n          }\n          level1[i].itemStyle = {\n            color: data[j].itemStyle.color\n          };\n        }\n      }\n    },\n    initChart() {\n      const chart = echarts.init(this.$refs.chart);\n      chart.setOption({\n        backgroundColor: 'transparent',\n        color: this.colors,\n        series: [{\n          type: 'sunburst',\n          center: ['50%', '50%'],\n          radius: ['0%', '150%'],\n          data: this.data,\n          sort: function (a, b) {\n            if (a.depth === 1) return b.getValue() - a.getValue();\n            return a.dataIndex - b.dataIndex;\n          },\n          label: {\n            rotate: 'radial',\n            color: this.bgColor\n          },\n          itemStyle: {\n            borderColor: this.bgColor,\n            borderWidth: 2\n          },\n          levels: [{}, {\n            r0: 0,\n            r: 60,\n            label: {\n              rotate: 0\n            }\n          }, {\n            r0: 60,\n            r: 150\n          }, {\n            r0: 170,\n            r: 210,\n            itemStyle: {\n              shadowBlur: 2,\n              shadowColor: this.colors[2],\n              color: 'transparent'\n            },\n            label: {\n              rotate: 'tangential',\n              fontSize: 10,\n              color: this.colors[0]\n            }\n          }, {\n            r0: 210,\n            r: 220,\n            itemStyle: {\n              shadowBlur: 80,\n              shadowColor: this.colors[0]\n            },\n            label: {\n              position: 'outside',\n              textShadowBlur: 5,\n              textShadowColor: '#333'\n            },\n            downplay: {\n              label: {\n                opacity: 0.5\n              }\n            }\n          }]\n        }]\n      });\n    }\n  }\n};","map":{"version":3,"names":["echarts","name","data","colors","bgColor","itemStyle","star5","color","star4","star3","star2","children","mounted","formatData","initChart","methods","j","length","level1","i","block","bookScore","bookScoreId","star","style","label","downplay","opacity","forEach","book","value","chart","init","$refs","setOption","backgroundColor","series","type","center","radius","sort","a","b","depth","getValue","dataIndex","rotate","borderColor","borderWidth","levels","r0","r","shadowBlur","shadowColor","fontSize","position","textShadowBlur","textShadowColor"],"sources":["D:\\desk\\数据可视化\\project\\xuxiake\\src\\components\\PageFive.vue"],"sourcesContent":["<template>\r\n  <div ref=\"chart\" class=\"chart-container\"></div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\n\r\nexport default {\r\n  name: 'PageOne',\r\n  data() {\r\n    return {\r\n      colors: ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'],\r\n      bgColor: '#2E2733',\r\n      itemStyle: {\r\n        star5: { color: '#FFAE57' },\r\n        star4: { color: '#FF7853' },\r\n        star3: { color: '#EA5151' },\r\n        star2: { color: '#CC3F57' }\r\n      },\r\n      data: [\r\n        {\r\n          name: '虚构',\r\n          itemStyle: { color: '#FF7853' },\r\n          children: [\r\n            {\r\n              name: '小说',\r\n              children: [\r\n                { name: '5☆', children: [{ name: '疼' }, { name: '慈悲' }, { name: '楼下的房客' }] },\r\n                { name: '4☆', children: [{ name: '虚无的十字架' }, { name: '无声告白' }, { name: '童年的终结' }] },\r\n                { name: '3☆', children: [{ name: '疯癫老人日记' }] }\r\n              ]\r\n            },\r\n            // 省略部分数据\r\n          ]\r\n        },\r\n        {\r\n          name: '非虚构',\r\n          itemStyle: { color: '#EA5151' },\r\n          children: [\r\n            {\r\n              name: '设计',\r\n              children: [\r\n                { name: '5☆', children: [{ name: '无界面交互' }] },\r\n                { name: '4☆', children: [{ name: '数字绘图的光照与渲染技术' }, { name: '日本建筑解剖书' }] },\r\n                { name: '3☆', children: [{ name: '奇幻世界艺术\\n&RPG地图绘制讲座' }] }\r\n              ]\r\n            },\r\n            // 省略部分数据\r\n          ]\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n    this.formatData();\r\n    this.initChart();\r\n  },\r\n  methods: {\r\n    formatData() {\r\n      const { data, colors, itemStyle } = this;\r\n      for (let j = 0; j < data.length; ++j) {\r\n        const level1 = data[j].children;\r\n        for (let i = 0; i < level1.length; ++i) {\r\n          const block = level1[i].children;\r\n          const bookScore = [];\r\n          let bookScoreId;\r\n          for (let star = 0; star < block.length; ++star) {\r\n            let style = (function (name) {\r\n              switch (name) {\r\n                case '5☆':\r\n                  bookScoreId = 0;\r\n                  return itemStyle.star5;\r\n                case '4☆':\r\n                  bookScoreId = 1;\r\n                  return itemStyle.star4;\r\n                case '3☆':\r\n                  bookScoreId = 2;\r\n                  return itemStyle.star3;\r\n                case '2☆':\r\n                  bookScoreId = 3;\r\n                  return itemStyle.star2;\r\n              }\r\n            })(block[star].name);\r\n            block[star].label = { color: style.color, downplay: { opacity: 0.5 } };\r\n            if (block[star].children) {\r\n              style = { opacity: 1, color: style.color };\r\n              block[star].children.forEach((book) => {\r\n                book.value = 1;\r\n                book.itemStyle = style;\r\n                book.label = { color: style.color };\r\n                let value = bookScoreId === 0 || bookScoreId === 3 ? 5 : 1;\r\n                if (bookScore[bookScoreId]) {\r\n                  bookScore[bookScoreId].value += value;\r\n                } else {\r\n                  bookScore[bookScoreId] = { color: colors[bookScoreId], value };\r\n                }\r\n              });\r\n            }\r\n          }\r\n          level1[i].itemStyle = { color: data[j].itemStyle.color };\r\n        }\r\n      }\r\n    },\r\n    initChart() {\r\n      const chart = echarts.init(this.$refs.chart);\r\n      chart.setOption({\r\n        backgroundColor: 'transparent',\r\n        color: this.colors,\r\n        series: [\r\n          {\r\n            type: 'sunburst',\r\n            center: ['50%', '50%'],\r\n            radius: ['0%', '150%'],\r\n            data: this.data,\r\n            sort: function (a, b) {\r\n              if (a.depth === 1) return b.getValue() - a.getValue();\r\n              return a.dataIndex - b.dataIndex;\r\n            },\r\n            label: { rotate: 'radial', color: this.bgColor },\r\n            itemStyle: { borderColor: this.bgColor, borderWidth: 2 },\r\n            levels: [\r\n              {},\r\n              { r0: 0, r: 60, label: { rotate: 0 } },\r\n              { r0: 60, r: 150 },\r\n              {\r\n                r0: 170,\r\n                r: 210,\r\n                itemStyle: { shadowBlur: 2, shadowColor: this.colors[2], color: 'transparent' },\r\n                label: { rotate: 'tangential', fontSize: 10, color: this.colors[0] }\r\n              },\r\n              {\r\n                r0: 210,\r\n                r: 220,\r\n                itemStyle: { shadowBlur: 80, shadowColor: this.colors[0] },\r\n                label: { position: 'outside', textShadowBlur: 5, textShadowColor: '#333' },\r\n                downplay: { label: { opacity: 0.5 } }\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page-content {\r\n  text-align: center;\r\n  padding-top: 20px;\r\n}\r\n.chart-container {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}