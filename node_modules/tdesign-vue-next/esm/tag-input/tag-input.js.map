{"version":3,"file":"tag-input.js","sources":["../../src/tag-input/tag-input.tsx"],"sourcesContent":["import { defineComponent, computed, toRefs, ref, nextTick, reactive, watch } from 'vue';\nimport { CloseCircleFilledIcon as TdCloseCircleFilledIcon } from 'tdesign-icons-vue-next';\nimport TInput, { InputProps, StrInputProps, TdInputProps } from '../input';\nimport { TdTagInputProps } from './type';\nimport props from './props';\nimport { renderTNodeJSX } from '../utils/render-tnode';\nimport { useConfig } from '../config-provider/useConfig';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport useTagScroll from './hooks/useTagScroll';\nimport useTagList from './useTagList';\nimport useHover from './hooks/useHover';\nimport useDefault from '../hooks/useDefaultValue';\nimport useDragSorter from './hooks/useDragSorter';\nimport isArray from 'lodash/isArray';\nimport { useDisabled } from '../hooks/useDisabled';\nimport { useReadonly } from '../hooks/useReadonly';\n\nconst useComponentClassName = () => {\n  return {\n    NAME_CLASS: usePrefixClass('tag-input'),\n    CLEAR_CLASS: usePrefixClass('tag-input__suffix-clear'),\n    BREAK_LINE_CLASS: usePrefixClass('tag-input--break-line'),\n  };\n};\n\nexport default defineComponent({\n  name: 'TTagInput',\n\n  props: { ...props },\n\n  setup(props: TdTagInputProps) {\n    const { NAME_CLASS, CLEAR_CLASS, BREAK_LINE_CLASS } = useComponentClassName();\n    const { CloseCircleFilledIcon } = useGlobalIcon({ CloseCircleFilledIcon: TdCloseCircleFilledIcon });\n\n    const isDisabled = useDisabled();\n    const isReadonly = useReadonly();\n\n    const { inputValue, inputProps } = toRefs(props);\n    const [tInputValue, setTInputValue] = useDefault(\n      inputValue,\n      props.defaultInputValue,\n      props.onInputChange,\n      'inputValue',\n    );\n    const { excessTagsDisplayType, clearable, placeholder } = toRefs(props);\n    const { isHover, addHover, cancelHover } = useHover({\n      readonly: isReadonly.value,\n      disabled: isDisabled.value,\n      onMouseenter: props.onMouseenter,\n      onMouseleave: props.onMouseleave,\n    });\n    const isComposition = ref(false);\n    const { classPrefix } = useConfig();\n    const isFocused = ref(false);\n\n    // 这里不需要响应式，因此直接传递参数\n    const { getDragProps } = useDragSorter({\n      ...props,\n      sortOnDraggable: props.dragSort,\n      onDragOverCheck: {\n        x: true,\n        targetClassNameRegExp: new RegExp(`^${classPrefix.value}-tag`),\n      },\n    });\n    const { scrollToRight, onWheel, scrollToRightOnEnter, scrollToLeftOnLeave, tagInputRef, isScrollable } =\n      useTagScroll(props);\n    // handle tag add and remove\n    // 需要响应式，为了尽量的和 react 版本做法相同，这里进行响应式处理\n    const { tagValue, onInnerEnter, onInputBackspaceKeyUp, onInputBackspaceKeyDown, clearAll, renderLabel, onClose } =\n      useTagList(\n        reactive({\n          ...toRefs(props),\n          getDragProps,\n        }),\n      );\n\n    const classes = computed(() => {\n      const isEmpty = !(isArray(tagValue.value) && tagValue.value.length);\n      return [\n        NAME_CLASS.value,\n        {\n          [BREAK_LINE_CLASS.value]: excessTagsDisplayType.value === 'break-line',\n          [`${classPrefix.value}-is-empty`]: isEmpty,\n          [`${classPrefix.value}-tag-input--with-tag`]: !isEmpty,\n        },\n      ];\n    });\n\n    const tagInputPlaceholder = computed(() => (!tagValue.value?.length ? placeholder.value : ''));\n\n    const showClearIcon = computed(() =>\n      Boolean(\n        !isReadonly.value &&\n          !isDisabled.value &&\n          clearable.value &&\n          isHover.value &&\n          (tagValue.value?.length || tInputValue.value),\n      ),\n    );\n\n    const onInputEnter = (value: string, context: { e: KeyboardEvent }) => {\n      // 阻止 Enter 默认行为，避免在 Form 中触发 submit 事件\n      context.e?.preventDefault?.();\n      setTInputValue('', { e: context.e, trigger: 'enter' });\n      !isComposition.value && onInnerEnter(value, context);\n      nextTick(() => {\n        scrollToRight();\n        isComposition.value = false;\n      });\n    };\n\n    const onInputCompositionstart = (value: string, context: { e: CompositionEvent }) => {\n      isComposition.value = true;\n      inputProps.value?.onCompositionstart?.(value, context);\n    };\n\n    const onInputCompositionend = (value: string, context: { e: CompositionEvent }) => {\n      isComposition.value = false;\n      inputProps.value?.onCompositionend?.(value, context);\n    };\n\n    const onClick: TdInputProps['onClick'] = (ctx) => {\n      if (isDisabled.value) return;\n      isFocused.value = true;\n      tagInputRef.value.focus();\n      props.onClick?.(ctx);\n    };\n\n    const onClearClick = (context: { e: MouseEvent }) => {\n      clearAll(context);\n      setTInputValue('', { e: context.e, trigger: 'clear' });\n      props.onClear?.(context);\n    };\n\n    const focus = () => {\n      tagInputRef.value.focus();\n    };\n\n    const blur = () => {\n      tagInputRef.value.blur();\n    };\n\n    const onMouseEnter: InputProps['onMouseenter'] = (context) => {\n      addHover(context);\n      scrollToRightOnEnter();\n    };\n\n    const onMouseLeave: InputProps['onMouseleave'] = (context) => {\n      cancelHover(context);\n      scrollToLeftOnLeave();\n    };\n\n    const onInnerFocus: InputProps['onFocus'] = (inputValue: string, context: { e: MouseEvent }) => {\n      if (isFocused.value) return;\n      isFocused.value = true;\n      props.onFocus?.(tagValue.value, { e: context.e, inputValue });\n    };\n\n    const onInnerBlur: InputProps['onFocus'] = (inputValue: string, context: { e: MouseEvent }) => {\n      isFocused.value = false;\n      setTInputValue('', { e: context.e, trigger: 'blur' });\n      props.onBlur?.(tagValue.value, { e: context.e, inputValue });\n    };\n\n    const onInnerChange: StrInputProps['onChange'] = (val, context) => {\n      setTInputValue(val, { ...context, trigger: 'input' });\n    };\n\n    watch(\n      () => isScrollable.value,\n      (v) => {\n        if (props.excessTagsDisplayType !== 'scroll') return;\n        const scrollElementClass = `${classPrefix.value}-input__prefix`;\n        const scrollElement = tagInputRef.value.$el.querySelector(`.${scrollElementClass}`);\n        if (v) scrollElement.classList.add(`${scrollElementClass}--scrollable`);\n        else scrollElement.classList.remove(`${scrollElementClass}--scrollable`);\n      },\n    );\n    return {\n      CLEAR_CLASS,\n      CloseCircleFilledIcon,\n      tagValue,\n      tInputValue,\n      isHover,\n      tagInputPlaceholder,\n      showClearIcon,\n      tagInputRef,\n      classPrefix,\n      isFocused,\n      focus,\n      blur,\n      setTInputValue,\n      onMouseEnter,\n      onMouseLeave,\n      onInnerFocus,\n      onInnerBlur,\n      onInnerChange,\n      addHover,\n      cancelHover,\n      onInputEnter,\n      onInnerEnter,\n      onInputBackspaceKeyUp,\n      onInputBackspaceKeyDown,\n      renderLabel,\n      onWheel,\n      scrollToRightOnEnter,\n      scrollToLeftOnLeave,\n      onClick,\n      onClearClick,\n      onClose,\n      onInputCompositionstart,\n      onInputCompositionend,\n      classes,\n      isDisabled,\n      isReadonly,\n    };\n  },\n\n  render() {\n    const { CloseCircleFilledIcon } = this;\n    const suffixIconNode = this.showClearIcon ? (\n      <CloseCircleFilledIcon class={this.CLEAR_CLASS} onClick={this.onClearClick} />\n    ) : (\n      renderTNodeJSX(this, 'suffixIcon')\n    );\n    const prefixIconNode = renderTNodeJSX(this, 'prefixIcon');\n    const suffixClass = `${this.classPrefix}-tag-input__with-suffix-icon`;\n    if (suffixIconNode && !this.classes.includes(suffixClass)) {\n      this.classes.push(suffixClass);\n    }\n    // 自定义 Tag 节点\n    const displayNode = renderTNodeJSX(this, 'valueDisplay', {\n      params: {\n        value: this.tagValue,\n        onClose: (index: number) => this.onClose({ index }),\n      },\n    });\n    // 左侧文本\n    const label = renderTNodeJSX(this, 'label', { silent: true });\n    const inputProps = this.inputProps as TdTagInputProps['inputProps'];\n    const readonly = this.isReadonly || inputProps?.readonly;\n    return (\n      <TInput\n        ref=\"tagInputRef\"\n        v-slots={{\n          suffix: this.$slots.suffix,\n        }}\n        borderless={this.borderless}\n        readonly={readonly}\n        showInput={!readonly || !this.tagValue || !this.tagValue?.length}\n        value={this.tInputValue}\n        autoWidth={true} // 控制input_inner的宽度 设置为true让内部input不会提前换行\n        size={this.size}\n        disabled={this.isDisabled}\n        label={() => this.renderLabel({ displayNode, label })}\n        class={this.classes}\n        tips={this.tips}\n        status={this.status}\n        placeholder={this.tagInputPlaceholder}\n        suffix={this.suffix}\n        suffixIcon={() => suffixIconNode}\n        prefixIcon={() => prefixIconNode}\n        keepWrapperWidth={!this.autoWidth}\n        onWheel={this.onWheel}\n        onChange={this.onInnerChange}\n        onPaste={this.onPaste}\n        onEnter={this.onInputEnter}\n        onKeyup={this.onInputBackspaceKeyUp}\n        onKeydown={this.onInputBackspaceKeyDown}\n        onMouseenter={this.onMouseEnter}\n        onMouseleave={this.onMouseLeave}\n        onFocus={this.onInnerFocus}\n        onBlur={this.onInnerBlur}\n        onClick={this.onClick}\n        onCompositionstart={this.onInputCompositionstart}\n        onCompositionend={this.onInputCompositionend}\n        {...(this.inputProps as TdTagInputProps['inputProps'])}\n      />\n    );\n  },\n});\n"],"names":["useComponentClassName","NAME_CLASS","usePrefixClass","CLEAR_CLASS","BREAK_LINE_CLASS","defineComponent","name","props","_objectSpread","setup","_useComponentClassNam","_useGlobalIcon","useGlobalIcon","CloseCircleFilledIcon","TdCloseCircleFilledIcon","isDisabled","useDisabled","isReadonly","useReadonly","_toRefs","toRefs","inputValue","inputProps","_useDefault","useDefault","defaultInputValue","onInputChange","_useDefault2","_slicedToArray","tInputValue","setTInputValue","_toRefs2","excessTagsDisplayType","clearable","placeholder","_useHover","useHover","readonly","value","disabled","onMouseenter","onMouseleave","isHover","addHover","cancelHover","isComposition","ref","_useConfig","useConfig","classPrefix","isFocused","_useDragSorter","useDragSorter","sortOnDraggable","dragSort","onDragOverCheck","x","targetClassNameRegExp","RegExp","concat","getDragProps","_useTagScroll","useTagScroll","scrollToRight","onWheel","scrollToRightOnEnter","scrollToLeftOnLeave","tagInputRef","isScrollable","_useTagList","useTagList","reactive","tagValue","onInnerEnter","onInputBackspaceKeyUp","onInputBackspaceKeyDown","clearAll","renderLabel","onClose","classes","computed","isEmpty","isArray","length","_defineProperty","tagInputPlaceholder","_tagValue$value","showClearIcon","_tagValue$value2","Boolean","onInputEnter","context","_context$e","_context$e$preventDef","e","preventDefault","call","trigger","nextTick","onInputCompositionstart","_inputProps$value","_inputProps$value$onC","onCompositionstart","onInputCompositionend","_inputProps$value2","_inputProps$value2$on","onCompositionend","onClick","ctx","_props2$onClick","focus","onClearClick","_props2$onClear","onClear","blur","onMouseEnter","onMouseLeave","onInnerFocus","_props2$onFocus","onFocus","onInnerBlur","_props2$onBlur","onBlur","onInnerChange","val","watch","v","scrollElementClass","scrollElement","$el","querySelector","classList","add","remove","render","_this","_this$tagValue","suffixIconNode","_createVNode","renderTNodeJSX","prefixIconNode","suffixClass","includes","push","displayNode","params","index","label","silent","TInput","_mergeProps","borderless","size","tips","status","suffix","suffixIcon","prefixIcon","autoWidth","onPaste","$slots"],"mappings":"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"}