{"version":3,"file":"trigger.js","sources":["../../src/color-picker/trigger.tsx"],"sourcesContent":["import { defineComponent, PropType, ref, watch } from 'vue';\nimport TInput from '../input';\nimport { Color } from './utils';\nimport { TdColorPickerProps } from './type';\nimport { useBaseClassName } from './hooks';\nimport { useCommonClassName } from '../hooks/useConfig';\n\nexport default defineComponent({\n  name: 'DefaultTrigger',\n  inheritAttrs: false,\n  props: {\n    color: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    borderless: {\n      type: Boolean,\n      default: false,\n    },\n    clearable: {\n      type: Boolean,\n      default: false,\n    },\n    inputProps: {\n      type: Object as PropType<TdColorPickerProps['inputProps']>,\n      default: () => {\n        return {\n          autoWidth: true,\n        };\n      },\n    },\n    onTriggerChange: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n    size: {\n      type: String as PropType<TdColorPickerProps['size']>,\n      default: 'medium',\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const value = ref(props.color);\n    const { SIZE: sizeClassNames } = useCommonClassName();\n    watch(\n      () => [props.color],\n      () => (value.value = props.color),\n    );\n\n    const handleChange = (input: string) => {\n      if (input === props.color) {\n        return;\n      }\n      if (input && !Color.isValid(input)) {\n        value.value = props.color;\n      } else {\n        value.value = input;\n      }\n      props.onTriggerChange(value.value);\n    };\n\n    return {\n      baseClassName,\n      value,\n      handleChange,\n      sizeClassNames,\n    };\n  },\n\n  render() {\n    const { baseClassName, sizeClassNames } = this;\n\n    const inputSlots = {\n      label: () => {\n        return (\n          <div class={[`${baseClassName}__trigger--default__color`, `${baseClassName}--bg-alpha`]}>\n            <span\n              class={[\n                'color-inner',\n                {\n                  [sizeClassNames[this.size]]: this.size !== 'medium',\n                },\n              ]}\n              style={{\n                background: this.value,\n              }}\n            ></span>\n          </div>\n        );\n      },\n    };\n    return (\n      <TInput\n        borderless={this.borderless}\n        clearable={this.clearable}\n        size={this.size}\n        v-slots={inputSlots}\n        v-model={this.value}\n        disabled={this.disabled}\n        onBlur={this.handleChange}\n        {...this.inputProps}\n      />\n    );\n  },\n});\n"],"names":["defineComponent","name","inheritAttrs","props","color","type","String","disabled","Boolean","borderless","clearable","inputProps","Object","default","autoWidth","onTriggerChange","Function","size","setup","baseClassName","useBaseClassName","value","ref","_useCommonClassName","useCommonClassName","sizeClassNames","SIZE","watch","handleChange","input","Color","isValid","render","_this","inputSlots","label","_createVNode","concat","_defineProperty","background","TInput","_mergeProps","onUpdateModelValue","$event"],"mappings":"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"}