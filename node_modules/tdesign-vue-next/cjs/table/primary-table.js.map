{"version":3,"file":"primary-table.js","sources":["../../src/table/primary-table.tsx"],"sourcesContent":["import { computed, defineComponent, toRefs, h, ref, onMounted, getCurrentInstance } from 'vue';\nimport get from 'lodash/get';\nimport omit from 'lodash/omit';\nimport baseTableProps from './base-table-props';\nimport primaryTableProps from './primary-table-props';\nimport BaseTable from './base-table';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport useColumnController from './hooks/useColumnController';\nimport useRowExpand from './hooks/useRowExpand';\nimport useTableHeader, { renderTitle } from './hooks/useTableHeader';\nimport useRowSelect from './hooks/useRowSelect';\nimport { TdPrimaryTableProps, PrimaryTableCol, TableRowData, PrimaryTableCellParams } from './type';\nimport useSorter from './hooks/useSorter';\nimport useFilter from './hooks/useFilter';\nimport useDragSort from './hooks/useDragSort';\nimport useAsyncLoading from './hooks/useAsyncLoading';\nimport EditableCell, { EditableCellProps } from './editable-cell';\nimport { PageInfo } from '../pagination';\nimport useClassName from './hooks/useClassName';\nimport { useConfig } from '../hooks/useConfig';\nimport useEditableRow from './hooks/useEditableRow';\nimport useStyle from './hooks/useStyle';\nimport { ScrollToElementParams } from '../hooks/useVirtualScrollNew';\nimport { BaseTableProps } from './interface';\n\nexport { BASE_TABLE_ALL_EVENTS } from './base-table';\n\nconst OMIT_PROPS = [\n  'hideSortTips',\n  'dragSort',\n  'defaultExpandedRowKeys',\n  'defaultSelectedRowKeys',\n  'columnController',\n  'filterRow',\n  'sortOnRowDraggable',\n  'expandOnRowClick',\n  'expand-on-row-click',\n  'expanded-row',\n  'editable-row-keys',\n  'editable-cell-state',\n  'filter-value',\n  'multipleSort',\n  'expandIcon',\n  'expand-icon',\n  'reserveSelectedRowOnPaginate',\n  'expandedRowKeys',\n  'expandedRow',\n  'reserve-selected-row-on-paginate',\n  'reserveSelectedRowOnPaginate',\n  'selected-row-keys',\n  'selectedRowKeys',\n  'selectOnRowClick',\n  'column-controller',\n  'columnController',\n  'dragSort',\n  'drag-sort',\n  'hideSortTips',\n  'showSortColumnBgColor',\n  'filter-row',\n  'filterRow',\n  'multiple-sort',\n  'multipleSort',\n  'async-loading',\n  'onChange',\n  'onAsyncLoadingClick',\n  'onColumnChange',\n  'onColumnControllerVisibleChange',\n  'onDataChange',\n  'onDisplayColumnsChange',\n  'onDragSort',\n  'onExpandChange',\n  'onFilterChange',\n  'onSelectChange',\n  'onSortChange',\n];\n\nexport default defineComponent({\n  name: 'TPrimaryTable',\n\n  props: {\n    ...baseTableProps,\n    ...primaryTableProps,\n  },\n\n  setup(props, context) {\n    const renderTNode = useTNodeJSX();\n    const { columns, columnController } = toRefs(props);\n    const primaryTableRef = ref(null);\n    const showElement = ref(false);\n\n    const { classPrefix, tableDraggableClasses, tableBaseClass, tableSelectedClasses, tableSortClasses } =\n      useClassName();\n    const { globalConfig } = useConfig('table', props.locale);\n    const { sizeClassNames } = useStyle(props);\n    const tableSize = computed(() => props.size ?? globalConfig.value.size);\n    // 自定义列配置功能\n    const { tDisplayColumns, renderColumnController } = useColumnController(props, context);\n\n    // 展开/收起行功能\n    const {\n      showExpandedRow,\n      showExpandIconColumn,\n      getExpandColumn,\n      renderExpandedRow,\n      onInnerExpandRowClick,\n      getExpandedRowClass,\n    } = useRowExpand(props, context);\n\n    // 排序功能\n    const { renderSortIcon } = useSorter(props, context);\n\n    // 行选中功能\n    const {\n      selectColumn,\n      showRowSelect,\n      selectedRowClassNames,\n      currentPaginateData,\n      formatToRowSelectColumn,\n      setTSelectedRowKeys,\n      onInnerSelectRowClick,\n      handleRowSelectWithAreaSelection,\n    } = useRowSelect(props, tableSelectedClasses);\n\n    // 过滤功能\n    const {\n      hasEmptyCondition,\n      isTableOverflowHidden,\n      renderFilterIcon,\n      renderFirstFilterRow,\n      setFilterPrimaryTableRef,\n    } = useFilter(props, context);\n\n    // 拖拽排序功能\n    const dragSortParams = computed(() => ({\n      showElement: showElement.value,\n    }));\n    const {\n      isRowHandlerDraggable,\n      isRowDraggable,\n      isColDraggable,\n      innerPagination,\n      setDragSortPrimaryTableRef,\n      setDragSortColumns,\n    } = useDragSort(props, context, dragSortParams);\n\n    const { renderTitleWidthIcon } = useTableHeader(props);\n    const { renderAsyncLoading } = useAsyncLoading(props);\n\n    // 可编辑行\n    const {\n      errorListMap,\n      editableKeysMap,\n      validateRowData,\n      validateTableData,\n      onRuleChange,\n      clearValidateData,\n      onUpdateEditedCell,\n      // getEditRowData,\n      onPrimaryTableCellEditChange,\n    } = useEditableRow(props);\n\n    const innerKeyboardRowHover = computed(() => Boolean(showExpandedRow.value || showRowSelect.value));\n\n    const innerDisableSpaceInactiveRow = computed(() => Boolean(showExpandedRow.value || showRowSelect.value));\n\n    const primaryTableClasses = computed(() => {\n      return {\n        [tableDraggableClasses.colDraggable]: isColDraggable.value,\n        [tableDraggableClasses.rowHandlerDraggable]: isRowHandlerDraggable.value,\n        [tableDraggableClasses.rowDraggable]: isRowDraggable.value,\n        [tableBaseClass.overflowVisible]: isTableOverflowHidden.value === false,\n        [tableBaseClass.tableRowEdit]: props.editableRowKeys,\n        [`${classPrefix}-table--select-${selectColumn.value?.type}`]: selectColumn.value,\n        [`${classPrefix}-table--row-select`]: showRowSelect.value,\n        [`${classPrefix}-table--row-expandable`]: showExpandedRow.value,\n      };\n    });\n\n    // 如果想给 TR 添加类名，请在这里补充，不要透传更多额外 Props 到 BaseTable\n    const tRowClassNames = computed(() => {\n      const tClassNames = [props.rowClassName, selectedRowClassNames.value, getExpandedRowClass];\n      return tClassNames.filter((v) => v);\n    });\n\n    // 如果想给 TR 添加属性，请在这里补充，不要透传更多额外 Props 到 BaseTable\n    const tRowAttributes = computed(() => {\n      const tAttributes = [props.rowAttributes];\n      if (isRowHandlerDraggable.value || isRowDraggable.value) {\n        tAttributes.push(({ row }) => ({ 'data-id': get(row, props.rowKey || 'id') }));\n      }\n      return tAttributes.filter((v) => v);\n    });\n\n    // 多个 Hook 共用 primaryTableRef\n    onMounted(() => {\n      setFilterPrimaryTableRef(primaryTableRef.value);\n      setDragSortPrimaryTableRef(primaryTableRef.value);\n    });\n\n    // 对外暴露的方法\n    context.expose({\n      validateRowData,\n      validateTableData,\n      clearValidateData,\n      refreshTable: () => {\n        primaryTableRef.value.refreshTable();\n      },\n      scrollToElement: (data: ScrollToElementParams) => {\n        primaryTableRef.value.scrollToElement(data);\n      },\n      scrollColumnIntoView: (colKey: string) => {\n        primaryTableRef.value.scrollColumnIntoView(colKey);\n      },\n      // 暴露基础表格 ref 及相关方法\n      baseTableRef: primaryTableRef,\n    });\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const onEditableCellChange: EditableCellProps['onChange'] = (params) => {\n      props.onRowEdit?.(params);\n      const rowValue = get(params.editedRow, props.rowKey || 'id');\n      onUpdateEditedCell(rowValue, params.row, {\n        [params.col.colKey]: params.value,\n      });\n    };\n\n    // 1. 影响列数量的因素有：自定义列配置、展开/收起行、多级表头；2. 影响表头内容的因素有：排序图标、筛选图标\n    const getColumns = (columns: PrimaryTableCol<TableRowData>[], parentDisplay = false) => {\n      const arr: PrimaryTableCol<TableRowData>[] = [];\n      for (let i = 0, len = columns.length; i < len; i++) {\n        let item = { ...columns[i] };\n        // 自定义列显示控制\n        const isDisplayColumn = item.children?.length || tDisplayColumns.value?.includes(item.colKey);\n        if (\n          !isDisplayColumn &&\n          (props.columnController || props.displayColumns || props.defaultDisplayColumns) &&\n          !parentDisplay\n        )\n          continue;\n        item = formatToRowSelectColumn(item);\n        const { sort } = props;\n        if (item.sorter && props.showSortColumnBgColor) {\n          const sorts = sort instanceof Array ? sort : [sort];\n          const sortedColumn = sorts.find(\n            (sort) => sort && sort.sortBy === item.colKey && sort.descending !== undefined,\n          );\n          if (sortedColumn) {\n            item.className =\n              item.className instanceof Array\n                ? item.className.concat(tableSortClasses.sortColumn)\n                : [item.className, tableSortClasses.sortColumn];\n          }\n        }\n        // 添加排序图标和过滤图标\n        if (item.sorter || item.filter) {\n          const titleContent = renderTitle(context.slots, item, i);\n          const { ellipsisTitle } = item;\n          item.title = (h, p) => {\n            const sortIcon = item.sorter ? renderSortIcon(p) : null;\n            const filterIcon = item.filter ? renderFilterIcon(p) : null;\n            // @ts-ignore 注意：此处 Vue2 和 Vue3 有所不同\n            const attach = primaryTableRef.value?.tableContentRef;\n            return renderTitleWidthIcon(\n              [titleContent, sortIcon, filterIcon],\n              p.col,\n              p.colIndex,\n              ellipsisTitle,\n              attach,\n              {\n                classPrefix,\n                ellipsisOverlayClassName: tableSize.value !== 'medium' ? sizeClassNames[tableSize.value] : '',\n              },\n            );\n          };\n          item.ellipsisTitle = false;\n        }\n        // 如果是单元格可编辑状态\n        if (item.edit?.component) {\n          const oldCell = item.cell;\n          item.cell = (h, p: PrimaryTableCellParams<TableRowData>) => {\n            const cellProps: EditableCellProps = {\n              ...p,\n              oldCell,\n              rowKey: props.rowKey || 'id',\n              tableBaseClass,\n              cellEmptyContent: props.cellEmptyContent,\n              onChange: props.onRowEdit,\n              onValidate: props.onRowValidate,\n              onRuleChange,\n              onEditableChange: onPrimaryTableCellEditChange,\n            };\n            if (props.editableRowKeys) {\n              const rowValue = get(p.row, props.rowKey || 'id');\n              cellProps.editable = editableKeysMap.value[rowValue] || false;\n              const key = [rowValue, p.col.colKey].join('__');\n              const errorList = errorListMap.value?.[key];\n              errorList && (cellProps.errors = errorList);\n            }\n            if (props.editableCellState) {\n              cellProps.readonly = !props.editableCellState(p);\n            }\n            return <EditableCell {...cellProps} v-slots={context.slots} onUpdateEditedCell={onUpdateEditedCell} />;\n          };\n        }\n        if (item.children?.length) {\n          item.children = getColumns(item.children, parentDisplay || tDisplayColumns.value?.includes(item.colKey));\n        }\n        // 多级表头和自定义列配置特殊逻辑：要么子节点不存在，要么子节点长度大于 1，方便做自定义列配置\n        if (!item.children || item.children?.length) {\n          arr.push(item);\n        }\n      }\n      return arr;\n    };\n\n    const tColumns = computed(() => {\n      const cols = getColumns(columns.value);\n      if (showExpandIconColumn.value) {\n        cols.unshift(getExpandColumn());\n      }\n      return cols;\n    });\n\n    const onInnerPageChange = (pageInfo: PageInfo, newData: Array<TableRowData>) => {\n      innerPagination.value = { ...innerPagination.value, ...pageInfo };\n      currentPaginateData.value = newData;\n      props.onPageChange?.(pageInfo, newData);\n      const changeParams: Parameters<TdPrimaryTableProps['onChange']> = [\n        { pagination: pageInfo },\n        { trigger: 'pagination', currentData: newData },\n      ];\n      props.onChange?.(...changeParams);\n      // 是否在分页时保留选中结果，如果不保留则需清空\n      if (!props.reserveSelectedRowOnPaginate) {\n        setTSelectedRowKeys([], {\n          selectedRowData: [],\n          type: 'uncheck',\n          currentRowKey: 'CLEAR_ON_PAGINATE',\n        });\n      }\n    };\n\n    const onInnerActiveRowAction: BaseTableProps['onActiveRowAction'] = (params) => {\n      props.onActiveRowAction?.(params);\n      handleRowSelectWithAreaSelection(params);\n    };\n\n    const onSingleRowClick: TdPrimaryTableProps['onRowClick'] = (params) => {\n      if (props.expandOnRowClick) {\n        onInnerExpandRowClick(params);\n      }\n      if (props.selectOnRowClick) {\n        onInnerSelectRowClick(params);\n      }\n    };\n\n    // handle click and dblclick exits at the same time\n    let timer: any;\n    const DURATION = 250;\n    const onInnerRowClick: TdPrimaryTableProps['onRowClick'] = (params) => {\n      // no dbl click conflict, no delay\n      if (!props.onRowDblclick) {\n        onSingleRowClick(params);\n        return;\n      }\n      if (timer) {\n        // dblclick\n        clearTimeout(timer);\n        timer = undefined;\n      } else {\n        timer = setTimeout(() => {\n          onSingleRowClick(params);\n          timer = undefined;\n        }, DURATION);\n      }\n    };\n\n    const onShowElementChange = (val: boolean) => {\n      showElement.value = val;\n    };\n\n    return () => {\n      const formatNode = (\n        api: string,\n        renderInnerNode: Function,\n        condition: boolean,\n        extra?: { reverse?: boolean },\n      ) => {\n        if (!condition) return props[api];\n        const innerNode = renderInnerNode(h);\n        const propsNode = renderTNode(api);\n        if (innerNode && !propsNode) return () => innerNode;\n        if (propsNode && !innerNode) return () => propsNode;\n        if (innerNode && propsNode) {\n          return () =>\n            extra?.reverse ? (\n              <div>\n                {innerNode}\n                {propsNode}\n              </div>\n            ) : (\n              <div>\n                {propsNode}\n                {innerNode}\n              </div>\n            );\n        }\n        return null;\n      };\n      const isColumnController = !!(columnController.value && Object.keys(columnController.value).length);\n      // @ts-ignore\n      const placement = isColumnController ? columnController.value.placement || 'top-right' : '';\n      const isBottomController = isColumnController && placement?.indexOf('bottom') !== -1;\n      const topContent = formatNode('topContent', renderColumnController, isColumnController && !isBottomController);\n      const bottomContent = formatNode('bottomContent', renderColumnController, isBottomController, {\n        reverse: true,\n      });\n      const firstFullRow = formatNode('firstFullRow', renderFirstFilterRow, !hasEmptyCondition.value);\n      const lastFullRow = formatNode('lastFullRow', renderAsyncLoading, !!props.asyncLoading);\n\n      // important for base-table controlled properties\n      const { vnode } = getCurrentInstance();\n\n      const baseTableProps: BaseTableProps = {\n        ...omit(vnode.props, OMIT_PROPS),\n        rowKey: props.rowKey,\n        rowClassName: tRowClassNames.value,\n        rowAttributes: tRowAttributes.value,\n        columns: tColumns.value,\n        keyboardRowHover: props.keyboardRowHover ?? innerKeyboardRowHover.value,\n        disableSpaceInactiveRow: props.disableSpaceInactiveRow ?? innerDisableSpaceInactiveRow.value,\n        topContent,\n        bottomContent,\n        firstFullRow,\n        lastFullRow,\n        thDraggable: ['col', 'row-handler-col'].includes(props.dragSort),\n        onShowElementChange,\n        onPageChange: onInnerPageChange,\n        renderExpandedRow: showExpandedRow.value ? renderExpandedRow : undefined,\n        onActiveRowAction: onInnerActiveRowAction,\n      };\n\n      if (props.expandOnRowClick || props.selectOnRowClick) {\n        baseTableProps.onRowClick = onInnerRowClick;\n      }\n\n      return (\n        <BaseTable\n          v-slots={context.slots}\n          {...baseTableProps}\n          ref={primaryTableRef}\n          class={primaryTableClasses.value}\n          onLeafColumnsChange={setDragSortColumns}\n        />\n      );\n    };\n  },\n});\n"],"names":["OMIT_PROPS","defineComponent","name","props","_objectSpread","baseTableProps","primaryTableProps","setup","context","renderTNode","useTNodeJSX","_toRefs","toRefs","columns","columnController","primaryTableRef","ref","showElement","_useClassName","useClassName","classPrefix","tableDraggableClasses","tableBaseClass","tableSelectedClasses","tableSortClasses","_useConfig","useConfig","locale","globalConfig","_useStyle","useStyle","sizeClassNames","tableSize","computed","_props$size","size","value","_useColumnController","useColumnController","tDisplayColumns","renderColumnController","_useRowExpand","useRowExpand","showExpandedRow","showExpandIconColumn","getExpandColumn","renderExpandedRow","onInnerExpandRowClick","getExpandedRowClass","_useSorter","useSorter","renderSortIcon","_useRowSelect","useRowSelect","selectColumn","showRowSelect","selectedRowClassNames","currentPaginateData","formatToRowSelectColumn","setTSelectedRowKeys","onInnerSelectRowClick","handleRowSelectWithAreaSelection","_useFilter","useFilter","hasEmptyCondition","isTableOverflowHidden","renderFilterIcon","renderFirstFilterRow","setFilterPrimaryTableRef","dragSortParams","_useDragSort","useDragSort","isRowHandlerDraggable","isRowDraggable","isColDraggable","innerPagination","setDragSortPrimaryTableRef","setDragSortColumns","_useTableHeader","useTableHeader","renderTitleWidthIcon","_useAsyncLoading","useAsyncLoading","renderAsyncLoading","_useEditableRow","useEditableRow","errorListMap","editableKeysMap","validateRowData","validateTableData","onRuleChange","clearValidateData","onUpdateEditedCell","onPrimaryTableCellEditChange","innerKeyboardRowHover","Boolean","innerDisableSpaceInactiveRow","primaryTableClasses","_selectColumn$value","_defineProperty","colDraggable","rowHandlerDraggable","rowDraggable","overflowVisible","tableRowEdit","editableRowKeys","concat","type","tRowClassNames","tClassNames","rowClassName","filter","v","tRowAttributes","tAttributes","rowAttributes","push","_ref2","row","get","rowKey","onMounted","expose","refreshTable","scrollToElement","data","scrollColumnIntoView","colKey","baseTableRef","getColumns","parentDisplay","arguments","length","undefined","arr","_loop","_item$children","_tDisplayColumns$valu","_item$edit","_item$children2","_item$children3","item","i","isDisplayColumn","children","includes","displayColumns","defaultDisplayColumns","sort","sorter","showSortColumnBgColor","sorts","Array","sortedColumn","find","sortBy","descending","className","sortColumn","titleContent","renderTitle","slots","_item","ellipsisTitle","title","h","p","_primaryTableRef$valu","sortIcon","filterIcon","attach","tableContentRef","col","colIndex","ellipsisOverlayClassName","edit","component","oldCell","cell","cellProps","cellEmptyContent","onChange","onRowEdit","onValidate","onRowValidate","onEditableChange","_errorListMap$value","rowValue","editable","key","join","errorList","errors","editableCellState","readonly","_createVNode","EditableCell","_mergeProps","_tDisplayColumns$valu2","len","tColumns","cols","unshift","onInnerPageChange","pageInfo","newData","_props$onPageChange","_props$onChange","onPageChange","call","changeParams","pagination","trigger","currentData","apply","reserveSelectedRowOnPaginate","selectedRowData","currentRowKey","onInnerActiveRowAction","params","_props$onActiveRowAct","onActiveRowAction","onSingleRowClick","expandOnRowClick","selectOnRowClick","timer","DURATION","onInnerRowClick","onRowDblclick","clearTimeout","setTimeout","onShowElementChange","val","_props$keyboardRowHov","_props$disableSpaceIn","formatNode","api","renderInnerNode","condition","extra","innerNode","propsNode","reverse","isColumnController","Object","keys","placement","isBottomController","indexOf","topContent","bottomContent","firstFullRow","lastFullRow","asyncLoading","_getCurrentInstance","getCurrentInstance","vnode","omit","keyboardRowHover","disableSpaceInactiveRow","thDraggable","dragSort","onRowClick","BaseTable"],"mappings":"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"}