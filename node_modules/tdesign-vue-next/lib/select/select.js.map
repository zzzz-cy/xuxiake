{"version":3,"file":"select.js","sources":["../../src/select/select.tsx"],"sourcesContent":["import { defineComponent, provide, computed, toRefs, watch, ref, nextTick, PropType } from 'vue';\nimport picker from 'lodash/pick';\nimport isArray from 'lodash/isArray';\nimport isFunction from 'lodash/isFunction';\nimport debounce from 'lodash/debounce';\nimport cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport intersection from 'lodash/intersection';\nimport FakeArrow from '../common-components/fake-arrow';\nimport SelectInput from '../select-input';\nimport SelectPanel from './select-panel';\nimport props from './props';\n// hooks\nimport { useDisabled } from '../hooks/useDisabled';\nimport { useReadonly } from '../hooks/useReadonly';\nimport useDefaultValue from '../hooks/useDefaultValue';\nimport useVModel from '../hooks/useVModel';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { selectInjectKey, getSingleContent, getMultipleContent } from './helper';\nimport { useSelectOptions } from './hooks/useSelectOptions';\nimport useKeyboardControl from './hooks/useKeyboardControl';\nimport type { PopupProps, PopupVisibleChangeContext } from '../popup';\nimport type { SelectInputValueChangeContext } from '../select-input';\nimport type { TdSelectProps, SelectValue } from './type';\nimport { SelectInputValueDisplayOptions } from '../select-input/useSingle';\n\nexport default defineComponent({\n  name: 'TSelect',\n  props: {\n    ...props,\n    /**\n     * 非公开 API，请勿使用（后续即将删除）\n     */\n    valueDisplayOptions: {\n      type: Object as PropType<SelectInputValueDisplayOptions>,\n    },\n  },\n  setup(props: TdSelectProps & { valueDisplayOptions: SelectInputValueDisplayOptions }, { slots }) {\n    const classPrefix = usePrefixClass();\n    const isDisabled = useDisabled();\n    const isReadonly = useReadonly();\n    const renderTNodeJSX = useTNodeJSX();\n    const COMPONENT_NAME = usePrefixClass('select');\n    const { globalConfig, t } = useConfig('select');\n    const { popupVisible, inputValue, modelValue, value } = toRefs(props);\n    const [innerInputValue, setInputValue] = useDefaultValue(\n      inputValue,\n      props.defaultInputValue,\n      props.onInputChange,\n      'inputValue',\n    );\n    const [orgValue, setOrgValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const selectPanelRef = ref(null);\n    const selectInputRef = ref(null);\n    const keys = computed(() => ({\n      label: props.keys?.label || 'label',\n      value: props.keys?.value || 'value',\n      disabled: props.keys?.disabled || 'disabled',\n    }));\n    const { optionsMap, optionsList, optionsCache, displayOptions } = useSelectOptions(props, keys, innerInputValue);\n\n    // 内部数据,格式化过的\n    const innerValue = computed(() => {\n      if (orgValue.value === undefined) {\n        return props.multiple ? [] : undefined;\n      }\n      if (props.valueType === 'object') {\n        return !props.multiple\n          ? orgValue.value[keys.value.value]\n          : (orgValue.value as SelectValue[]).map((option) => option[keys.value.value]);\n      }\n      return orgValue.value;\n    });\n\n    const setInnerValue: TdSelectProps['onChange'] = (newVal: SelectValue | SelectValue[], context) => {\n      if (props.valueType === 'object') {\n        const { value, label } = keys.value;\n        const getOption = (val: SelectValue) => {\n          if (val === undefined) {\n            return undefined;\n          }\n          const option = optionsMap.value.get(val);\n          return {\n            [value]: get(option, value),\n            [label]: get(option, label),\n          };\n        };\n        newVal = props.multiple ? (newVal as SelectValue[]).map((val) => getOption(val)) : getOption(newVal);\n      }\n      if (newVal === orgValue.value) return;\n      if (props.multiple && !props.reserveKeyword) setInputValue('');\n      setOrgValue(newVal, {\n        selectedOptions: getSelectedOptions(newVal),\n        ...context,\n      });\n    };\n\n    const [innerPopupVisible, setInnerPopupVisible] = useDefaultValue(\n      popupVisible,\n      false,\n      (visible: boolean, context: PopupVisibleChangeContext) => {\n        props.onPopupVisibleChange?.(visible, context);\n      },\n      'popupVisible',\n    );\n\n    const placeholderText = computed(\n      () =>\n        ((!props.multiple && innerPopupVisible.value && getSingleContent(innerValue.value, optionsMap)) ||\n          props.placeholder) ??\n        t(globalConfig.value.placeholder),\n    );\n\n    // selectInput 展示值\n    const displayText = computed(() =>\n      props.multiple\n        ? getMultipleContent(innerValue.value as SelectValue[], optionsMap)\n        : getSingleContent(innerValue.value, optionsMap),\n    );\n\n    // valueDisplayParams参数\n    const valueDisplayParams = computed(() => {\n      const val =\n        props.multiple && isArray(innerValue.value)\n          ? (innerValue.value as SelectValue[]).map((value) => ({\n              value,\n              label: optionsMap.value.get(value)?.label,\n            }))\n          : innerValue.value;\n\n      const params = {\n        value: val,\n        onClose: props.multiple ? (index: number) => removeTag(index) : () => {},\n      };\n\n      if (!props.multiple) Object.assign(params, { label: displayText.value });\n\n      if (props.minCollapsedNum && props.multiple) {\n        return {\n          ...params,\n          displayValue: val?.slice?.(0, props.minCollapsedNum),\n        };\n      }\n      return params;\n    });\n\n    const isFilterable = computed(() => {\n      return Boolean(props.filterable || globalConfig.value.filterable || isFunction(props.filter));\n    });\n\n    const isRemoteSearch = computed(() => {\n      return Boolean((props.filterable || globalConfig.value.filterable) && isFunction(props.onSearch));\n    });\n\n    // 移除tag\n    const removeTag = (index: number, e?: MouseEvent) => {\n      e && e.stopPropagation();\n      const selectValue = cloneDeep(innerValue.value) as SelectValue[];\n      const value = selectValue[index];\n      selectValue.splice(index, 1);\n      setInnerValue(selectValue, { selectedOptions: getSelectedOptions(selectValue), trigger: 'tag-remove', e });\n      props.onRemove?.({\n        value: value as string | number,\n        data: optionsMap.value.get(value),\n        e,\n      });\n    };\n\n    const handleCreate = () => {\n      if (!innerInputValue.value) return;\n      props.onCreate?.(innerInputValue.value);\n      // only clean input value when reopen popup\n      if (!innerPopupVisible.value) setInputValue('');\n    };\n\n    const popupContentRef = computed(() => selectInputRef.value?.popupRef.getOverlay() as HTMLElement);\n\n    /**\n     * 可选选项的列表\n     * 排除已禁用和全选的选项\n     */\n    const optionalList = computed(() =>\n      optionsList.value.filter((item) => {\n        return !item.disabled && !item['check-all'] && !item.checkAll;\n      }),\n    );\n\n    const getSelectedOptions = (selectValue: SelectValue[] | SelectValue = innerValue.value) => {\n      return optionsList.value.filter((option) => {\n        if (option.checkAll) return;\n        if (isArray(selectValue)) return selectValue.includes(option.value);\n        return selectValue === option.value;\n      });\n    };\n\n    const { hoverIndex, virtualFilteredOptions, handleKeyDown, filteredOptions } = useKeyboardControl({\n      displayOptions,\n      optionsList,\n      innerPopupVisible,\n      setInnerPopupVisible,\n      selectPanelRef,\n      isFilterable,\n      isRemoteSearch,\n      getSelectedOptions,\n      setInnerValue,\n      innerValue,\n      popupContentRef,\n      multiple: props.multiple,\n      max: props.max,\n    });\n\n    const onCheckAllChange = (checked: boolean) => {\n      if (!props.multiple) return;\n      const value = checked ? optionalList.value.map((option) => option.value) : [];\n      setInnerValue(value, { selectedOptions: getSelectedOptions(value), trigger: checked ? 'check' : 'clear' });\n    };\n\n    // 已选的长度\n    const intersectionLen = computed<number>(() => {\n      const values = optionalList.value.map((item) => item.value);\n      const n = intersection(innerValue.value, values);\n      return n.length;\n    });\n\n    // 全选\n    const isCheckAll = computed<boolean>(() => {\n      return intersectionLen.value === optionalList.value.length;\n    });\n\n    // 半选\n    const indeterminate = computed<boolean>(() => !isCheckAll.value && intersectionLen.value !== 0);\n\n    const SelectProvider = computed(() => ({\n      max: props.max,\n      multiple: props.multiple,\n      hoverIndex: hoverIndex.value,\n      selectValue: innerValue.value,\n      reserveKeyword: props.reserveKeyword,\n      handleValueChange: setInnerValue,\n      handlerInputChange: setInputValue,\n      handlePopupVisibleChange: setInnerPopupVisible,\n      handleCreate,\n      size: props.size,\n      popupContentRef,\n      indeterminate: indeterminate.value,\n      isCheckAll: isCheckAll.value,\n      onCheckAllChange,\n      getSelectedOptions,\n      displayOptions: displayOptions.value,\n      emitBlur: handleOptionEmitBlur,\n    }));\n\n    provide(selectInjectKey, SelectProvider);\n\n    const checkValueInvalid = () => {\n      // 参数类型检测与修复\n      if (!props.multiple && isArray(orgValue.value)) {\n        setOrgValue(undefined, { selectedOptions: [], trigger: 'default' });\n      }\n      if (props.multiple && !isArray(orgValue.value)) {\n        setOrgValue([], { selectedOptions: [], trigger: 'default' });\n      }\n    };\n\n    const handleSearch = debounce((value: string, { e }: { e: KeyboardEvent }) => {\n      props.onSearch?.(`${value}`, { e });\n    }, 300);\n\n    const handlerInputChange = (value: string, context: SelectInputValueChangeContext) => {\n      if (value) {\n        !innerPopupVisible.value && setInnerPopupVisible(true, { e: context.e as KeyboardEvent });\n      }\n      setInputValue(value);\n      handleSearch(`${value}`, { e: context.e as KeyboardEvent });\n      nextTick(() => {\n        virtualFilteredOptions.value = selectPanelRef.value?.visibleData;\n        filteredOptions.value = selectPanelRef.value?.displayOptions;\n      });\n    };\n\n    const handleOptionEmitBlur = (e: MouseEvent | KeyboardEvent) => {\n      props.onBlur?.({ e, value: innerValue.value });\n    };\n\n    const handlerPopupVisibleChange = (visible: boolean, context: PopupVisibleChangeContext) => {\n      setInnerPopupVisible(visible, context);\n      // 在通过点击选择器打开弹窗时 清空此前的输入内容 避免在关闭时就清空引起的闪烁问题\n      if (visible && context.trigger === 'trigger-element-click') setInputValue('');\n    };\n\n    const handlerPopupScrollToBottom: PopupProps['onScrollToBottom'] = async (context) => {\n      const { popupProps } = props;\n      if (props.loading) {\n        return;\n      }\n      // @ts-ignore types 中只有 onScrollToBottom，但 Vue 会自动转换 on-scroll-to-bottom 并支持，故此处都进行调用\n      popupProps?.['on-scroll-to-bottom']?.(context);\n      popupProps?.onScrollToBottom?.(context);\n    };\n\n    const addCache = (val: SelectValue) => {\n      if (props.multiple) {\n        const newCache = [];\n        for (const item of (val as SelectValue[]) || []) {\n          const option = optionsMap.value.get(item);\n          if (option) {\n            newCache.push(option);\n          }\n        }\n        optionsCache.value = Array.from(new Set([...newCache, ...optionsCache.value]));\n      } else {\n        const option = optionsMap.value.get(val);\n        if (option) {\n          optionsCache.value = Array.from(new Set([option, ...optionsCache.value]));\n        }\n      }\n    };\n\n    watch(\n      orgValue,\n      (val) => {\n        checkValueInvalid();\n        nextTick(() => {\n          addCache(val);\n        });\n      },\n      {\n        immediate: true,\n      },\n    );\n    watch(\n      () => props.multiple,\n      () => {\n        checkValueInvalid();\n      },\n    );\n\n    // 列表展开时定位置选中项\n    const updateScrollTop = (content: HTMLDivElement) => {\n      if (!selectPanelRef.value) {\n        return;\n      }\n      const firstSelectedNode: HTMLDivElement = (selectPanelRef.value?.innerRef as HTMLDivElement)?.querySelector(\n        `.${classPrefix.value}-is-selected`,\n      );\n      // 此处需要等待渲染后进行计算\n      nextTick(() => {\n        if (firstSelectedNode && content) {\n          const { paddingBottom } = getComputedStyle(firstSelectedNode);\n          const { marginBottom } = getComputedStyle(content);\n          const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n          // 小于0时不需要特殊处理，会被设为0\n          const updateValue =\n            firstSelectedNode.offsetTop -\n            content.offsetTop -\n            (content.clientHeight - firstSelectedNode.clientHeight) +\n            elementBottomHeight;\n          // eslint-disable-next-line no-param-reassign\n          content.scrollTop = updateValue;\n        }\n      });\n    };\n    provide('updateScrollTop', updateScrollTop);\n    return () => {\n      const { overlayClassName, ...restPopupProps } = (props.popupProps || {}) as TdSelectProps['popupProps'];\n      return (\n        <div class={`${COMPONENT_NAME.value}__wrap`}>\n          <SelectInput\n            {...{\n              autoWidth: props.autoWidth,\n              readonly: isReadonly.value,\n              borderless: props.borderless,\n              multiple: props.multiple,\n              clearable: props.clearable,\n              loading: props.loading,\n              status: props.status,\n              tips: props.tips,\n              minCollapsedNum: props.minCollapsedNum,\n              autofocus: props.autofocus,\n              suffix: props.suffix,\n              valueDisplayOptions: props.valueDisplayOptions,\n            }}\n            ref={selectInputRef}\n            class={COMPONENT_NAME.value}\n            value={displayText.value}\n            disabled={isDisabled.value}\n            popupVisible={innerPopupVisible.value}\n            inputValue={innerPopupVisible.value ? innerInputValue.value : ''}\n            placeholder={`${placeholderText.value}`}\n            allowInput={isFilterable.value}\n            collapsed-items={props.collapsedItems}\n            inputProps={{\n              size: props.size,\n              autofocus: props.autofocus,\n              ...(props.inputProps as TdSelectProps['inputProps']),\n              onkeydown: handleKeyDown,\n            }}\n            tagInputProps={{\n              size: props.size,\n              ...(props.tagInputProps as TdSelectProps['tagInputProps']),\n            }}\n            onTagChange={(val, ctx) => {\n              removeTag(ctx.index);\n            }}\n            tagProps={{ ...(props.tagProps as TdSelectProps['tagProps']) }}\n            popupProps={{\n              overlayClassName: [`${COMPONENT_NAME.value}__dropdown`, overlayClassName],\n              ...restPopupProps,\n              onScrollToBottom: handlerPopupScrollToBottom,\n            }}\n            label={props.label}\n            prefixIcon={props.prefixIcon}\n            suffix={props.suffix}\n            suffixIcon={() => {\n              if (props.suffixIcon || slots.suffixIcon) {\n                return renderTNodeJSX('suffixIcon');\n              }\n\n              return (\n                props.showArrow && (\n                  <FakeArrow\n                    overlayClassName={`${COMPONENT_NAME.value}__right-icon`}\n                    isActive={innerPopupVisible.value}\n                  />\n                )\n              );\n            }}\n            valueDisplay={() =>\n              renderTNodeJSX('valueDisplay', {\n                params: valueDisplayParams.value,\n              })\n            }\n            onPopupVisibleChange={handlerPopupVisibleChange}\n            onInputChange={handlerInputChange}\n            onClear={({ e }) => {\n              setInnerValue(props.multiple ? [] : undefined, {\n                option: null,\n                selectedOptions: getSelectedOptions(props.multiple ? [] : undefined),\n                trigger: 'clear',\n                e,\n              });\n              props.onClear?.({ e });\n            }}\n            onEnter={(inputValue, { e }) => {\n              // onEnter和handleKeyDown的Enter事件同时触发，需要通过setTimeout设置先后\n              setTimeout(() => {\n                props.onEnter?.({ inputValue: `${innerInputValue.value}`, e, value: innerValue.value });\n                handleCreate();\n              }, 0);\n            }}\n            onBlur={(inputValue, { e }) => {\n              props.onBlur?.({ e, value: innerValue.value });\n            }}\n            onFocus={(inputValue, { e }) => {\n              props.onFocus?.({ e, value: innerValue.value });\n            }}\n            {...(props.selectInputProps as TdSelectProps['selectInputProps'])}\n            v-slots={{\n              label: slots.label,\n              prefixIcon: slots.prefixIcon,\n              suffix: slots.suffix,\n              panel: () => (\n                <SelectPanel\n                  ref={selectPanelRef}\n                  {...picker(props, [\n                    'size',\n                    'multiple',\n                    'empty',\n                    'loading',\n                    'loadingText',\n                    'filterable',\n                    'creatable',\n                    'panelTopContent',\n                    'panelBottomContent',\n                    'filter',\n                    'scroll',\n                  ])}\n                  inputValue={innerInputValue.value}\n                  v-slots={slots}\n                />\n              ),\n              collapsedItems: slots.collapsedItems,\n            }}\n          />\n        </div>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","_objectSpread","valueDisplayOptions","type","Object","setup","slots","_ref","classPrefix","usePrefixClass","isDisabled","useDisabled","isReadonly","useReadonly","renderTNodeJSX","useTNodeJSX","COMPONENT_NAME","_useConfig","useConfig","globalConfig","t","_toRefs","toRefs","popupVisible","inputValue","modelValue","value","_useDefaultValue","useDefaultValue","defaultInputValue","onInputChange","_useDefaultValue2","_slicedToArray","innerInputValue","setInputValue","_useVModel","useVModel","defaultValue","onChange","_useVModel2","orgValue","setOrgValue","selectPanelRef","ref","selectInputRef","keys","computed","_props2$keys","_props2$keys2","_props2$keys3","label","disabled","_useSelectOptions","useSelectOptions","optionsMap","optionsList","optionsCache","displayOptions","innerValue","multiple","valueType","map","option","setInnerValue","newVal","context","_keys$value","getOption","val","get","_defineProperty","reserveKeyword","selectedOptions","getSelectedOptions","_useDefaultValue3","visible","_props2$onPopupVisibl","onPopupVisibleChange","_useDefaultValue4","innerPopupVisible","setInnerPopupVisible","placeholderText","_ref3","getSingleContent","placeholder","displayText","getMultipleContent","valueDisplayParams","isArray","_optionsMap$value$get","params","onClose","index","removeTag","assign","minCollapsedNum","_val$slice","displayValue","slice","call","isFilterable","Boolean","filterable","isFunction","filter","isRemoteSearch","onSearch","e","_props2$onRemove","stopPropagation","selectValue","cloneDeep","splice","trigger","onRemove","data","handleCreate","_props2$onCreate","onCreate","popupContentRef","_selectInputRef$value","popupRef","getOverlay","optionalList","item","checkAll","arguments","length","undefined","includes","_useKeyboardControl","useKeyboardControl","max","hoverIndex","virtualFilteredOptions","handleKeyDown","filteredOptions","onCheckAllChange","checked","intersectionLen","values","n","intersection","isCheckAll","indeterminate","SelectProvider","handleValueChange","handlerInputChange","handlePopupVisibleChange","size","emitBlur","handleOptionEmitBlur","provide","selectInjectKey","checkValueInvalid","handleSearch","debounce","_ref4","_props2$onSearch","concat","nextTick","_selectPanelRef$value","_selectPanelRef$value2","visibleData","_props2$onBlur","onBlur","handlerPopupVisibleChange","handlerPopupScrollToBottom","_ref5","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_popupProps$onScroll","_popupProps$onScrollT","popupProps","wrap","_callee$","_context","prev","next","loading","abrupt","onScrollToBottom","stop","_x","apply","addCache","newCache","_iterator","_createForOfIteratorHelper","_step","s","done","push","err","f","Array","from","Set","_toConsumableArray","watch","immediate","updateScrollTop","content","_selectPanelRef$value3","firstSelectedNode","innerRef","querySelector","_getComputedStyle","getComputedStyle","paddingBottom","_getComputedStyle2","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","clientHeight","scrollTop","_ref6","overlayClassName","restPopupProps","_objectWithoutProperties","_excluded","_createVNode","SelectInput","_mergeProps","autoWidth","readonly","borderless","clearable","status","tips","autofocus","suffix","collapsedItems","inputProps","onkeydown","tagInputProps","onTagChange","ctx","tagProps","prefixIcon","suffixIcon","showArrow","FakeArrow","valueDisplay","onClear","_ref7","_props2$onClear","onEnter","_ref8","setTimeout","_props2$onEnter","_ref9","_props2$onBlur2","onFocus","_ref10","_props2$onFocus","selectInputProps","panel","picker"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,cAAeA,eAAgB,CAAA;AAC7BC,EAAAA,IAAM,EAAA,SAAA;AACNC,EAAAA,KAAO,EAAAC,aAAA,CAAAA,aAAA,KACFD,KAAA,CAAA,EAAA,EAAA,EAAA;AAIHE,IAAAA,mBAAqB,EAAA;AACnBC,MAAAA,IAAM,EAAAC,MAAAA;AACR,KAAA;GACF,CAAA;AACAC,EAAAA,KAAML,WAANK,KAAML,CAAAA,MAAAA,EAAAA,IAAAA,EAA2F;AAAA,IAAA,IAATM,KAAA,GAAAC,IAAA,CAAAD,KAAA,CAAA;AACtF,IAAA,IAAME,cAAcC,cAAe,EAAA,CAAA;AACnC,IAAA,IAAMC,aAAaC,WAAY,EAAA,CAAA;AAC/B,IAAA,IAAMC,aAAaC,WAAY,EAAA,CAAA;AAC/B,IAAA,IAAMC,iBAAiBC,WAAY,EAAA,CAAA;AAC7B,IAAA,IAAAC,cAAA,GAAiBP,eAAe,QAAQ,CAAA,CAAA;AAC9C,IAAA,IAAAQ,UAAA,GAA4BC,UAAU,QAAQ,CAAA;MAAtCC,YAAA,GAAAF,UAAA,CAAAE,YAAA;MAAcC,CAAE,GAAAH,UAAA,CAAFG,CAAE,CAAA;AACxB,IAAA,IAAAC,OAAA,GAAwDC,OAAOtB,MAAK,CAAA;MAA5DuB,YAAc,GAAAF,OAAA,CAAdE,YAAc;MAAAC,UAAA,GAAAH,OAAA,CAAAG,UAAA;MAAYC,qBAAAA;MAAYC,KAAM,GAAAL,OAAA,CAANK,KAAM,CAAA;AAC9C,IAAA,IAAAC,gBAAA,GAAmCC,eAAA,CACvCJ,UAAA,EACAxB,MAAM,CAAA6B,iBAAA,EACN7B,MAAM,CAAA8B,aAAA,EACN,YACF,CAAA;MAAAC,iBAAA,GAAAC,cAAA,CAAAL,gBAAA,EAAA,CAAA,CAAA;AALOM,MAAAA,eAAiB,GAAAF,iBAAA,CAAA,CAAA,CAAA;AAAAG,MAAAA,aAAa,GAAAH,iBAAA,CAAA,CAAA,CAAA,CAAA;AAM/B,IAAA,IAAAI,UAAA,GAA0BC,SAAA,CAAUV,OAAOD,UAAYzB,EAAAA,MAAAA,CAAMqC,YAAcrC,EAAAA,MAAAA,CAAMsC,QAAQ,CAAA;MAAAC,WAAA,GAAAP,cAAA,CAAAG,UAAA,EAAA,CAAA,CAAA;AAAxFK,MAAAA,QAAU,GAAAD,WAAA,CAAA,CAAA,CAAA;AAAAE,MAAAA,WAAW,GAAAF,WAAA,CAAA,CAAA,CAAA,CAAA;AACtB,IAAA,IAAAG,cAAA,GAAiBC,IAAI,IAAI,CAAA,CAAA;AACzB,IAAA,IAAAC,cAAA,GAAiBD,IAAI,IAAI,CAAA,CAAA;IACzB,IAAAE,IAAA,GAAOC,SAAS,YAAA;AAAA,MAAA,IAAAC,YAAA,EAAAC,aAAA,EAAAC,aAAA,CAAA;MAAA,OAAO;AAC3BC,QAAAA,KAAA,EAAOlD,CAAAA,CAAAA,YAAAA,GAAAA,MAAM,CAAA6C,IAAA,MAAAE,IAAAA,IAAAA,YAAA,KAAN/C,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,YAAAA,CAAYkD,KAAS,KAAA,OAAA;AAC5BxB,QAAAA,KAAA,EAAO1B,CAAAA,CAAAA,aAAAA,GAAAA,MAAM,CAAA6C,IAAA,MAAAG,IAAAA,IAAAA,aAAA,KAANhD,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,aAAAA,CAAY0B,KAAS,KAAA,OAAA;AAC5ByB,QAAAA,QAAA,EAAUnD,CAAAA,CAAAA,aAAAA,GAAAA,MAAM,CAAA6C,IAAA,MAAA,IAAA,IAAAI,aAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAANjD,aAAAA,CAAYmD,QAAY,KAAA,UAAA;OAClC,CAAA;AAAA,KAAA,CAAA,CAAA;IACI,IAAAC,iBAAA,GAA4DC,gBAAA,CAAiBrD,MAAO,EAAA6C,IAAA,EAAMZ,eAAe,CAAA;MAAvGqB,+BAAAA;MAAYC,WAAa,GAAAH,iBAAA,CAAbG,WAAa;MAAAC,YAAA,GAAAJ,iBAAA,CAAAI,YAAA;MAAcC,mCAAAA;AAGzC,IAAA,IAAAC,UAAA,GAAaZ,SAAS,YAAM;AAC5B,MAAA,IAAAN,QAAA,CAASd,UAAU,KAAW,CAAA,EAAA;AACzB1B,QAAAA,OAAAA,MAAAA,CAAM2D,QAAW,GAAA,EAAK,GAAA,KAAA,CAAA,CAAA;AAC/B,OAAA;AACI3D,MAAAA,IAAAA,MAAAA,CAAM4D,cAAc,QAAU,EAAA;QAChC,OAAO,CAAC5D,MAAM,CAAA2D,QAAA,GACVnB,QAAS,CAAAd,KAAA,CAAMmB,KAAKnB,KAAM,CAAAA,KAAA,CAAA,GACzBc,QAAS,CAAAd,KAAA,CAAwBmC,IAAI,UAACC,MAAA,EAAA;AAAA,UAAA,OAAWA,MAAO,CAAAjB,IAAA,CAAKnB,MAAMA,KAAM,CAAA,CAAA;SAAA,CAAA,CAAA;AAChF,OAAA;MACA,OAAOc,QAAS,CAAAd,KAAA,CAAA;AAClB,KAAC,CAAA,CAAA;IAEK,IAAAqC,aAAA,GAA2C,SAA3CA,aAAAA,CAA4CC,MAAA,EAAqCC,OAAY,EAAA;AAC7FjE,MAAAA,IAAAA,MAAAA,CAAM4D,cAAc,QAAU,EAAA;AAChC,QAAA,IAAAM,WAAA,GAAyBrB,IAAK,CAAAnB,KAAA;UAAtBA,MAAO,GAAAwC,WAAA,CAAPxC,KAAA;UAAOwB,KAAA,GAAAgB,WAAA,CAAAhB,KAAA,CAAA;AACT,QAAA,IAAAiB,SAAA,GAAY,SAAZA,SAAAA,CAAaC,GAAqB,EAAA;AACtC,UAAA,IAAIA,QAAQ,KAAW,CAAA,EAAA;AACd,YAAA,OAAA,KAAA,CAAA,CAAA;AACT,WAAA;UACA,IAAMN,MAAS,GAAAR,UAAA,CAAW5B,KAAM,CAAA2C,GAAA,CAAID,GAAG,CAAA,CAAA;UAChC,OAAAE,eAAA,CAAAA,eAAA,CAAA,EAAA,EACJ5C,MAAAA,EAAQ2C,GAAI,CAAAP,MAAA,EAAQpC,MAAK,CAAA,CAAA,EACzBwB,KAAA,EAAQmB,GAAI,CAAAP,MAAA,EAAQZ,KAAK,CAAA,CAAA,CAAA;SAE9B,CAAA;QACSlD,MAAAA,GAAAA,MAAAA,CAAM2D,QAAY,GAAAK,MAAA,CAAyBH,GAAI,CAAA,UAACO,GAAQ,EAAA;UAAA,OAAAD,SAAA,CAAUC,GAAG,CAAC,CAAA;AAAA,SAAA,CAAI,GAAAD,SAAA,CAAUH,MAAM,CAAA,CAAA;AACrG,OAAA;AACA,MAAA,IAAIA,WAAWxB,QAAS,CAAAd,KAAA,EAAO,OAAA;AAC3B1B,MAAAA,IAAAA,MAAAA,CAAM2D,QAAY,IAAA,CAAC3D,MAAM,CAAAuE,cAAA,EAAgBrC,aAAA,CAAc,EAAE,CAAA,CAAA;MAC7DO,WAAA,CAAYuB,MAAQ,EAAA/D,aAAA,CAAA;QAClBuE,eAAA,EAAiBC,mBAAmBT,MAAM,CAAA;OACvCC,EAAAA,OAAA,CACJ,CAAA,CAAA;KACH,CAAA;AAEM,IAAA,IAAAS,iBAAA,GAA4C9C,eAAA,CAChDL,YAAA,EACA,KAAA,EACA,UAACoD,SAAkBV,OAAuC,EAAA;AAAA,QAAA,IAAAW,qBAAA,CAAA;AACxD5E,QAAAA,CAAAA,qBAAAA,GAAAA,MAAAA,CAAM6E,oBAAuB,cAAAD,qBAAA,KAAA,KAAA,CAAA,IAA7B5E,qBAAAA,CAAAA,IAAAA,CAAAA,MAAAA,EAA6B2E,OAAA,EAASV,OAAO,CAAA,CAAA;OAC/C,EACA,cACF,CAAA;MAAAa,iBAAA,GAAA9C,cAAA,CAAA0C,iBAAA,EAAA,CAAA,CAAA;AAPOK,MAAAA,iBAAmB,GAAAD,iBAAA,CAAA,CAAA,CAAA;AAAAE,MAAAA,oBAAoB,GAAAF,iBAAA,CAAA,CAAA,CAAA,CAAA;IAS9C,IAAMG,eAAkB,GAAAnC,QAAA,CACtB,YAAA;AAAA,MAAA,IAAAoC,KAAA,CAAA;AAAA,MAAA,OAAA,CAAAA,KAAA,GACI,CAAClF,MAAAA,CAAM2D,QAAY,IAAAoB,iBAAA,CAAkBrD,SAASyD,gBAAiB,CAAAzB,UAAA,CAAWhC,KAAO,EAAA4B,UAAU,KAC3FtD,MAAM,CAAAoF,WAAA,MAAA,IAAA,IAAAF,KAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAA,GACR9D,CAAE,CAAAD,YAAA,CAAaO,MAAM0D,WAAW,CAAA,CAAA;AAAA,KACpC,CAAA,CAAA;IAGA,IAAMC,WAAc,GAAAvC,QAAA,CAAS,YAAA;MAAA,OAC3B9C,MAAM,CAAA2D,QAAA,GACF2B,kBAAmB,CAAA5B,UAAA,CAAWhC,KAAwB,EAAA4B,UAAU,CAChE,GAAA6B,gBAAA,CAAiBzB,UAAW,CAAAhC,KAAA,EAAO4B,UAAU,CAAA,CAAA;AAAA,KACnD,CAAA,CAAA;AAGM,IAAA,IAAAiC,kBAAA,GAAqBzC,SAAS,YAAM;MAClC,IAAAsB,GAAA,GACJpE,MAAM,CAAA2D,QAAA,IAAY6B,OAAQ,CAAA9B,UAAA,CAAWhC,KAAK,CAAA,GACrCgC,UAAW,CAAAhC,KAAA,CAAwBmC,GAAI,CAAA,UAACnC,MAAW,EAAA;AAAA,QAAA,IAAA+D,qBAAA,CAAA;QAAA,OAAA;AAClD/D,UAAAA,KAAAA,EAAAA,MAAAA;AACAwB,UAAAA,KAAO,EAAAuC,CAAAA,qBAAA,GAAAnC,UAAA,CAAW5B,KAAM,CAAA2C,GAAA,CAAI3C,MAAK,CAAG,MAAA,IAAA,IAAA+D,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAA7BA,qBAAA,CAA6BvC,KAAAA;SACtC,CAAA;AAAA,OAAE,IACFQ,UAAW,CAAAhC,KAAA,CAAA;AAEjB,MAAA,IAAMgE,MAAS,GAAA;AACbhE,QAAAA,KAAO,EAAA0C,GAAA;AACPuB,QAAAA,OAAA,EAAS3F,OAAM2D,QAAW,GAAA,UAACiC;iBAAkBC,SAAU,CAAAD,KAAK;YAAI,YAAM,EAAC;OACzE,CAAA;MAEA,IAAI,CAAC5F,MAAM,CAAA2D,QAAA,EAAUvD,MAAA,CAAO0F,OAAOJ,MAAQ,EAAA;QAAExC,KAAO,EAAAmC,WAAA,CAAY3D,KAAAA;AAAM,OAAC,CAAA,CAAA;AAEnE1B,MAAAA,IAAAA,MAAAA,CAAM+F,eAAmB/F,IAAAA,MAAAA,CAAM2D,QAAU,EAAA;AAAA,QAAA,IAAAqC,UAAA,CAAA;AACpC,QAAA,OAAA/F,aAAA,CAAAA,aAAA,CAAA,EAAA,EACFyF,MAAA,CAAA,EAAA,EAAA,EAAA;UACHO,YAAc,EAAA7B,GAAA,KAAAA,IAAAA,IAAAA,GAAA,gBAAA4B,UAAA,GAAA5B,GAAA,CAAK8B,KAAQ,MAAA,IAAA,IAAAF,UAAA,KAAbA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,UAAA,CAAAG,IAAA,CAAA/B,GAAA,EAAa,CAAA,EAAGpE,OAAM+F,eAAe,CAAA;AAAA,SAAA,CAAA,CAAA;AAEvD,OAAA;AACO,MAAA,OAAAL,MAAA,CAAA;AACT,KAAC,CAAA,CAAA;AAEK,IAAA,IAAAU,YAAA,GAAetD,SAAS,YAAM;AAC3B,MAAA,OAAAuD,OAAA,CAAQrG,OAAMsG,UAAc,IAAAnF,YAAA,CAAaO,MAAM4E,UAAc,IAAAC,UAAA,CAAWvG,MAAM,CAAAwG,MAAM,CAAC,CAAA,CAAA;AAC9F,KAAC,CAAA,CAAA;AAEK,IAAA,IAAAC,cAAA,GAAiB3D,SAAS,YAAM;AAC7B,MAAA,OAAAuD,OAAA,CAAA,CAASrG,OAAMsG,UAAc,IAAAnF,YAAA,CAAaO,MAAM4E,UAAe,KAAAC,UAAA,CAAWvG,MAAM,CAAA0G,QAAQ,CAAC,CAAA,CAAA;AAClG,KAAC,CAAA,CAAA;IAGK,IAAAb,SAAA,GAAY,SAAZA,SAAAA,CAAaD,KAAA,EAAee,CAAmB,EAAA;AAAA,MAAA,IAAAC,gBAAA,CAAA;AACnDD,MAAAA,CAAA,IAAKA,EAAEE,eAAgB,EAAA,CAAA;AACjB,MAAA,IAAAC,WAAA,GAAcC,SAAU,CAAArD,UAAA,CAAWhC,KAAK,CAAA,CAAA;AAC9C,MAAA,IAAMA,SAAQoF,WAAY,CAAAlB,KAAA,CAAA,CAAA;AACdkB,MAAAA,WAAA,CAAAE,MAAA,CAAOpB,OAAO,CAAC,CAAA,CAAA;MACb7B,aAAA,CAAA+C,WAAA,EAAa;AAAEtC,QAAAA,eAAiB,EAAAC,kBAAA,CAAmBqC,WAAW,CAAG;AAAAG,QAAAA,OAAA,EAAS,YAAc;AAAAN,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;AACzG3G,MAAAA,CAAAA,gBAAAA,GAAAA,OAAMkH,QAAW,MAAA,IAAA,IAAAN,gBAAA,KAAA,KAAA,CAAA,IAAjB5G,gBAAAA,CAAAA,IAAAA,CAAAA,QAAiB;AACf0B,QAAAA,KAAOA,EAAAA,MAAAA;QACPyF,IAAM,EAAA7D,UAAA,CAAW5B,KAAM,CAAA2C,GAAA,CAAI3C,MAAK,CAAA;AAChCiF,QAAAA,CAAA,EAAAA,CAAAA;AACF,OAAC,CAAA,CAAA;KACH,CAAA;AAEA,IAAA,IAAMS,eAAe,SAAfA,eAAqB;AAAA,MAAA,IAAAC,gBAAA,CAAA;AACzB,MAAA,IAAI,CAACpF,eAAgB,CAAAP,KAAA,EAAO,OAAA;AAC5B1B,MAAAA,CAAAA,gBAAAA,GAAAA,MAAAA,CAAMsH,QAAW,cAAAD,gBAAA,KAAA,KAAA,CAAA,IAAjBrH,gBAAAA,CAAAA,IAAAA,CAAAA,MAAAA,EAAiBiC,eAAA,CAAgBP,KAAK,CAAA,CAAA;MAEtC,IAAI,CAACqD,iBAAkB,CAAArD,KAAA,EAAOQ,aAAA,CAAc,EAAE,CAAA,CAAA;KAChD,CAAA;IAEA,IAAMqF,kBAAkBzE,QAAS,CAAA,YAAA;AAAA,MAAA,IAAA0E,qBAAA,CAAA;AAAA,MAAA,OAAA,CAAAA,qBAAA,GAAM5E,eAAelB,KAAO,MAAA8F,IAAAA,IAAAA,qBAAA,KAAtBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAA,CAAsBC,QAAA,CAASC,YAA2B,CAAA;KAAA,CAAA,CAAA;IAMjG,IAAMC,YAAe,GAAA7E,QAAA,CAAS,YAAA;MAAA,OAC5BS,WAAA,CAAY7B,KAAM,CAAA8E,MAAA,CAAO,UAACoB,IAAS,EAAA;AACjC,QAAA,OAAO,CAACA,IAAK,CAAAzE,QAAA,IAAY,CAACyE,IAAK,CAAA,WAAA,CAAA,IAAgB,CAACA,IAAK,CAAAC,QAAA,CAAA;AACvD,OAAC,CAAA,CAAA;AAAA,KACH,CAAA,CAAA;AAEA,IAAA,IAAMpD,kBAAqB,GAAA,SAArBA,kBAAqBA,GAAiE;AAAA,MAAA,IAAhEqC,WAA2C,GAAAgB,SAAA,CAAAC,MAAA,GAAAD,CAAAA,IAAAA,SAAA,CAAAE,CAAAA,CAAAA,KAAAA,SAAA,GAAAF,SAAA,CAAApE,CAAAA,CAAAA,GAAAA,UAAA,CAAWhC,KAAU,CAAA;MAC1F,OAAO6B,WAAY,CAAA7B,KAAA,CAAM8E,MAAO,CAAA,UAAC1C,MAAW,EAAA;QAC1C,IAAIA,MAAO,CAAA+D,QAAA,EAAU,OAAA;AACrB,QAAA,IAAIrC,QAAQsB,WAAW,CAAA,EAAU,OAAAA,WAAA,CAAYmB,QAAS,CAAAnE,MAAA,CAAOpC,KAAK,CAAA,CAAA;AAClE,QAAA,OAAOoF,gBAAgBhD,MAAO,CAAApC,KAAA,CAAA;AAChC,OAAC,CAAA,CAAA;KACH,CAAA;IAEA,IAAAwG,mBAAA,GAA+EC,kBAAmB,CAAA;AAChG1E,QAAAA,cAAA,EAAAA,cAAA;AACAF,QAAAA,WAAA,EAAAA,WAAA;AACAwB,QAAAA,iBAAA,EAAAA,iBAAA;AACAC,QAAAA,oBAAA,EAAAA,oBAAA;AACAtC,QAAAA,cAAA,EAAAA,cAAA;AACA0D,QAAAA,YAAA,EAAAA,YAAA;AACAK,QAAAA,cAAA,EAAAA,cAAA;AACAhC,QAAAA,kBAAA,EAAAA,kBAAA;AACAV,QAAAA,aAAA,EAAAA,aAAA;AACAL,QAAAA,UAAA,EAAAA,UAAA;AACA6D,QAAAA,eAAA,EAAAA,eAAA;QACA5D,UAAU3D,MAAM,CAAA2D,QAAA;QAChByE,KAAKpI,MAAM,CAAAoI,GAAAA;AACb,OAAC,CAAA;MAdOC,UAAY,GAAAH,mBAAA,CAAZG,UAAY;MAAAC,sBAAA,GAAAJ,mBAAA,CAAAI,sBAAA;MAAwBC,aAAe,GAAAL,mBAAA,CAAfK,aAAe;MAAAC,eAAA,GAAAN,mBAAA,CAAAM,eAAA,CAAA;AAgBrD,IAAA,IAAAC,gBAAA,GAAmB,SAAnBA,gBAAAA,CAAoBC,OAAqB,EAAA;AAC7C,MAAA,IAAI,CAAC1I,MAAM,CAAA2D,QAAA,EAAU,OAAA;MACfjC,IAAAA,MAAAA,GAAQgH,OAAU,GAAAf,YAAA,CAAajG,KAAM,CAAAmC,GAAA,CAAI,UAACC,MAAW,EAAA;QAAA,OAAAA,MAAA,CAAOpC,KAAK,CAAA;AAAA,OAAA,CAAA,GAAI,EAAC,CAAA;MAC9DA,aAAAA,CAAAA,MAAAA,EAAO;AAAE8C,QAAAA,eAAA,EAAiBC,kBAAmB/C,CAAAA,MAAK;AAAGuF,QAAAA,OAAS,EAAAyB,OAAA,GAAU,OAAU,GAAA,OAAA;AAAQ,OAAC,CAAA,CAAA;KAC3G,CAAA;AAGM,IAAA,IAAAC,eAAA,GAAkB7F,SAAiB,YAAM;MAC7C,IAAM8F,SAASjB,YAAa,CAAAjG,KAAA,CAAMmC,IAAI,UAAC+D,IAAA,EAAA;QAAA,OAASA,KAAKlG,KAAK,CAAA;OAAA,CAAA,CAAA;MAC1D,IAAMmH,CAAI,GAAAC,YAAA,CAAapF,UAAW,CAAAhC,KAAA,EAAOkH,MAAM,CAAA,CAAA;MAC/C,OAAOC,CAAE,CAAAd,MAAA,CAAA;AACX,KAAC,CAAA,CAAA;AAGK,IAAA,IAAAgB,UAAA,GAAajG,SAAkB,YAAM;MAClC,OAAA6F,eAAA,CAAgBjH,KAAU,KAAAiG,YAAA,CAAajG,KAAM,CAAAqG,MAAA,CAAA;AACtD,KAAC,CAAA,CAAA;IAGK,IAAAiB,aAAA,GAAgBlG,SAAkB,YAAA;MAAA,OAAM,CAACiG,WAAWrH,KAAS,IAAAiH,eAAA,CAAgBjH,UAAU,CAAC,CAAA;KAAA,CAAA,CAAA;IAExF,IAAAuH,cAAA,GAAiBnG,SAAS,YAAA;MAAA,OAAO;QACrCsF,KAAKpI,MAAM,CAAAoI,GAAA;QACXzE,UAAU3D,MAAM,CAAA2D,QAAA;QAChB0E,YAAYA,UAAW,CAAA3G,KAAA;QACvBoF,aAAapD,UAAW,CAAAhC,KAAA;QACxB6C,gBAAgBvE,MAAM,CAAAuE,cAAA;AACtB2E,QAAAA,iBAAmB,EAAAnF,aAAA;AACnBoF,QAAAA,kBAAoB,EAAAjH,aAAA;AACpBkH,QAAAA,wBAA0B,EAAApE,oBAAA;AAC1BoC,QAAAA,YAAA,EAAAA,YAAA;QACAiC,MAAMrJ,MAAM,CAAAqJ,IAAA;AACZ9B,QAAAA,eAAA,EAAAA,eAAA;QACAyB,eAAeA,aAAc,CAAAtH,KAAA;QAC7BqH,YAAYA,UAAW,CAAArH,KAAA;AACvB+G,QAAAA,gBAAA,EAAAA,gBAAA;AACAhE,QAAAA,kBAAA,EAAAA,kBAAA;QACAhB,gBAAgBA,cAAe,CAAA/B,KAAA;AAC/B4H,QAAAA,QAAU,EAAAC,oBAAAA;OACV,CAAA;AAAA,KAAA,CAAA,CAAA;AAEFC,IAAAA,OAAA,CAAQC,iBAAiBR,cAAc,CAAA,CAAA;AAEvC,IAAA,IAAMS,oBAAoB,SAApBA,oBAA0B;MAE9B,IAAI,CAAC1J,MAAM,CAAA2D,QAAA,IAAY6B,OAAQ,CAAAhD,QAAA,CAASd,KAAK,CAAG,EAAA;QAC9Ce,WAAA,CAAY,QAAW;AAAE+B,UAAAA,eAAA,EAAiB,EAAI;AAAAyC,UAAAA,OAAA,EAAS,SAAA;AAAU,SAAC,CAAA,CAAA;AACpE,OAAA;MACA,IAAIjH,OAAM2D,QAAY,IAAA,CAAC6B,OAAQ,CAAAhD,QAAA,CAASd,KAAK,CAAG,EAAA;QAClCe,WAAA,CAAA,IAAI;AAAE+B,UAAAA,eAAA,EAAiB,EAAI;AAAAyC,UAAAA,OAAA,EAAS,SAAA;AAAU,SAAC,CAAA,CAAA;AAC7D,OAAA;KACF,CAAA;IAEA,IAAM0C,eAAeC,QAAS,CAAA,UAAClI,MAAe,EAAAmI,KAAA,EAAgC;AAAA,MAAA,IAAAC,gBAAA,CAAA;AAAA,MAAA,IAA9BnD,UAAAA;AAC9C3G,MAAAA,CAAAA,gBAAAA,GAAAA,OAAM0G,QAAW,cAAAoD,gBAAA,KAAA,KAAA,CAAA,IAAjB9J,gBAAAA,CAAAA,IAAAA,CAAAA,kBAAoB0B,MAAS,CAAA,EAAA;AAAEiF,QAAAA,GAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;OACjC,GAAG,CAAA,CAAA;IAEA,IAAAwC,kBAAA,GAAqB,SAArBA,kBAAAA,CAAsBzH,MAAAA,EAAeuC,OAA2C,EAAA;AACpF,MAAA,IAAIvC,MAAO,EAAA;AACR,QAAA,CAAAqD,iBAAA,CAAkBrD,SAASsD,oBAAqB,CAAA,IAAA,EAAM;UAAE2B,CAAG,EAAA1C,OAAA,CAAQ0C,CAAAA;AAAmB,SAAC,CAAA,CAAA;AAC1F,OAAA;MACAzE,aAAA,CAAcR,MAAK,CAAA,CAAA;AACnBiI,MAAAA,YAAA,CAAAI,EAAAA,CAAAA,MAAA,CAAgBrI,MAAS,CAAA,EAAA;QAAEiF,CAAG,EAAA1C,OAAA,CAAQ0C,CAAAA;AAAmB,OAAC,CAAA,CAAA;AAC1DqD,MAAAA,QAAA,CAAS,YAAM;QAAA,IAAAC,qBAAA,EAAAC,sBAAA,CAAA;AACU5B,QAAAA,sBAAA,CAAA5G,KAAA,GAAAuI,CAAAA,qBAAA,GAAQvH,eAAehB,KAAO,MAAAuI,IAAAA,IAAAA,qBAAA,KAAtBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAA,CAAsBE,WAAA,CAAA;AACrC3B,QAAAA,eAAA,CAAA9G,KAAA,GAAAwI,CAAAA,sBAAA,GAAQxH,eAAehB,KAAO,MAAAwI,IAAAA,IAAAA,sBAAA,KAAtBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,sBAAA,CAAsBzG,cAAA,CAAA;AAChD,OAAC,CAAA,CAAA;KACH,CAAA;AAEM,IAAA,IAAA8F,oBAAA,GAAuB,SAAvBA,oBAAAA,CAAwB5C,CAAkC,EAAA;AAAA,MAAA,IAAAyD,cAAA,CAAA;AAC9DpK,MAAAA,CAAAA,cAAAA,GAAAA,OAAMqK,MAAS,MAAA,IAAA,IAAAD,cAAA,KAAA,KAAA,CAAA,IAAfpK,cAAAA,CAAAA,IAAAA,CAAAA,QAAe;AAAE2G,QAAAA,GAAAA;QAAGjF,KAAO,EAAAgC,UAAA,CAAWhC,KAAAA;AAAM,OAAC,CAAA,CAAA;KAC/C,CAAA;IAEM,IAAA4I,yBAAA,GAA4B,SAA5BA,yBAAAA,CAA6B3F,OAAA,EAAkBV,OAAuC,EAAA;AAC1Fe,MAAAA,oBAAA,CAAqBL,SAASV,OAAO,CAAA,CAAA;MAEjC,IAAAU,OAAA,IAAWV,QAAQgD,OAAY,KAAA,uBAAA,EAAyB/E,aAAA,CAAc,EAAE,CAAA,CAAA;KAC9E,CAAA;AAEM,IAAA,IAAAqI,0BAAA,gBAAA,YAAA;MAAA,IAAAC,KAAA,GAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAA6D,SAAAC,OAAAA,CAAO3G,OAAY,EAAA;QAAA,IAAA4G,oBAAA,EAAAC,qBAAA,CAAA;AAAA,QAAA,IAAAC,UAAA,CAAA;AAAA,QAAA,OAAAL,mBAAA,CAAAM,IAAA,CAAA,SAAAC,SAAAC,QAAA,EAAA;AAAA,UAAA,OAAA,CAAA,EAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;AAAA,YAAA,KAAA,CAAA;cAC5EL,aAAe/K,MAAAA,CAAf+K;kBACJ/K,CAAAA,OAAMqL,OAAS,EAAA;AAAAH,gBAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;AAAA,gBAAA,MAAA;AAAA,eAAA;cAAA,OAAAF,QAAA,CAAAI,MAAA,CAAA,QAAA,CAAA,CAAA;AAAA,YAAA,KAAA,CAAA;AAInBP,cAAAA,UAAA,aAAAA,UAAA,KAAA,KAAA,CAAA,IAAA,CAAAF,oBAAA,GAAAE,UAAA,CAAa,uEAAbF,oBAAA,CAAA1E,IAAA,CAAA4E,UAAA,EAAsC9G,OAAO,CAAA,CAAA;AAC7C8G,cAAAA,UAAA,aAAAA,UAAA,KAAA,KAAA,CAAA,IAAA,CAAAD,qBAAA,GAAAC,UAAA,CAAYQ,kEAAZT,qBAAA,CAAA3E,IAAA,CAAA4E,UAAA,EAA+B9G,OAAO,CAAA,CAAA;AAAA,YAAA,KAAA,CAAA,CAAA;AAAA,YAAA,KAAA,KAAA;cAAA,OAAAiH,QAAA,CAAAM,IAAA,EAAA,CAAA;AAAA,WAAA;AAAA,SAAA,EAAAZ,OAAA,CAAA,CAAA;OACxC,CAAA,CAAA,CAAA;MAAA,OARML,SAAAA,0BAAAA,CAAAkB,EAAA,EAAA;AAAA,QAAA,OAAAjB,KAAA,CAAAkB,KAAA,CAAA,IAAA,EAAA5D,SAAA,CAAA,CAAA;AAAA,OAAA,CAAA;KAQN,EAAA,CAAA;AAEM,IAAA,IAAA6D,QAAA,GAAW,SAAXA,QAAAA,CAAYvH,GAAqB,EAAA;MACrC,IAAIpE,OAAM2D,QAAU,EAAA;QAClB,IAAMiI,WAAW,EAAC,CAAA;AAAA,QAAA,IAAAC,SAAA,GAAAC,0BAAA,CACE1H,GAAyB,IAAA,EAAI,CAAA;UAAA2H,KAAA,CAAA;AAAA,QAAA,IAAA;UAAtC,KAAAF,SAAA,CAAAG,CAAA,EAAAD,EAAAA,CAAAA,CAAAA,KAAA,GAAAF,SAAA,CAAAhD,CAAA,EAAAoD,EAAAA,IAAA,GAAsC;AAAA,YAAA,IAAtCrE,IAAA,GAAAmE,KAAA,CAAArK,KAAA,CAAA;YACT,IAAMoC,MAAS,GAAAR,UAAA,CAAW5B,KAAM,CAAA2C,GAAA,CAAIuD,IAAI,CAAA,CAAA;AACxC,YAAA,IAAI9D,MAAQ,EAAA;AACV8H,cAAAA,QAAA,CAASM,KAAKpI,MAAM,CAAA,CAAA;AACtB,aAAA;AACF,WAAA;AAAA,SAAA,CAAA,OAAAqI,GAAA,EAAA;UAAAN,SAAA,CAAAlF,CAAA,CAAAwF,GAAA,CAAA,CAAA;AAAA,SAAA,SAAA;AAAAN,UAAAA,SAAA,CAAAO,CAAA,EAAA,CAAA;AAAA,SAAA;QACA5I,YAAA,CAAa9B,KAAQ,GAAA2K,KAAA,CAAMC,IAAK,gBAAA,IAAIC,GAAI,CAAA,EAAA,CAAAxC,MAAA,CAAI6B,QAAA,EAAAY,kBAAA,CAAahJ,YAAA,CAAa9B,KAAK,CAAC,CAAA,CAAC,CAAA,CAAA;AAC/E,OAAO,MAAA;QACL,IAAMoC,OAAS,GAAAR,UAAA,CAAW5B,KAAM,CAAA2C,GAAA,CAAID,GAAG,CAAA,CAAA;AACvC,QAAA,IAAIN,OAAQ,EAAA;UACGN,YAAA,CAAA9B,KAAA,GAAQ2K,KAAM,CAAAC,IAAA,gBAAS,IAAAC,GAAA,CAAA,CAAKzI,OAAA,CAAAiG,CAAAA,MAAA,CAAAyC,kBAAA,CAAWhJ,YAAA,CAAa9B,KAAK,CAAC,CAAA,CAAC,CAAA,CAAA;AAC1E,SAAA;AACF,OAAA;KACF,CAAA;AAEA+K,IAAAA,KAAA,CACEjK,QAAA,EACA,UAAC4B,GAAQ,EAAA;AACWsF,MAAAA,iBAAA,EAAA,CAAA;AAClBM,MAAAA,QAAA,CAAS,YAAM;QACb2B,QAAA,CAASvH,GAAG,CAAA,CAAA;AACd,OAAC,CAAA,CAAA;AACH,KAAA,EACA;AACEsI,MAAAA,SAAW,EAAA,IAAA;AACb,KACF,CAAA,CAAA;AACAD,IAAAA,KAAA,CACE,YAAA;MAAA,OAAMzM,MAAM,CAAA2D,QAAA,CAAA;AAAA,KAAA,EACZ,YAAM;AACc+F,MAAAA,iBAAA,EAAA,CAAA;AACpB,KACF,CAAA,CAAA;AAGM,IAAA,IAAAiD,eAAA,GAAkB,SAAlBA,eAAAA,CAAmBC,OAA4B,EAAA;AAAA,MAAA,IAAAC,sBAAA,CAAA;AAC/C,MAAA,IAAA,CAACnK,eAAehB,KAAO,EAAA;AACzB,QAAA,OAAA;AACF,OAAA;AACM,MAAA,IAAAoL,iBAAA,GAAA,CAAAD,sBAAA,GAAqCnK,cAAe,CAAAhB,KAAA,MAAA,IAAA,IAAAmL,sBAAA,KAAA,KAAA,CAAA,IAAA,CAAAA,sBAAA,GAAfA,sBAAA,CAAsBE,QAA6B,MAAA,IAAA,IAAAF,sBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAnDA,sBAAA,CAAmDG,aAAA,CAAA,GAAA,CAAAjD,MAAA,CACxFvJ,WAAY,CAAAkB,KAAA,EAAA,cAAA,CAClB,CAAA,CAAA;AAEAsI,MAAAA,QAAA,CAAS,YAAM;QACb,IAAI8C,qBAAqBF,OAAS,EAAA;AAChC,UAAA,IAAAK,iBAAA,GAA0BC,gBAAA,CAAiBJ,iBAAiB,CAAA;YAApDK,aAAA,GAAAF,iBAAA,CAAAE,aAAA,CAAA;AACR,UAAA,IAAAC,kBAAA,GAAyBF,gBAAA,CAAiBN,OAAO,CAAA;YAAzCS,YAAA,GAAAD,kBAAA,CAAAC,YAAA,CAAA;AACR,UAAA,IAAMC,sBAAsBC,QAAS,CAAAJ,aAAA,EAAe,EAAE,CAAI,GAAAI,QAAA,CAASF,cAAc,EAAE,CAAA,CAAA;AAE7E,UAAA,IAAAG,WAAA,GACJV,kBAAkBW,SAClB,GAAAb,OAAA,CAAQa,aACPb,OAAQ,CAAAc,YAAA,GAAeZ,kBAAkBY,YAC1C,CAAA,GAAAJ,mBAAA,CAAA;UAEFV,OAAA,CAAQe,SAAY,GAAAH,WAAA,CAAA;AACtB,SAAA;AACF,OAAC,CAAA,CAAA;KACH,CAAA;AACAhE,IAAAA,OAAA,CAAQ,mBAAmBmD,eAAe,CAAA,CAAA;AAC1C,IAAA,OAAO,YAAM;AACX,MAAA,IAAAiB,KAAA,GAAiD5N,MAAAA,CAAM+K,cAAc,EAAC;QAA9D8C,gBAAqB,GAAAD,KAAA,CAArBC,gBAAqB;AAAAC,QAAAA,cAAA,GAAAC,wBAAA,CAAAH,KAAA,EAAAI,SAAA,CAAA,CAAA;AAC7B,MAAA,OAAAC,WAAA,CAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAAA,EAAA,CAAAlE,MAAA,CACiB/I,cAAe,CAAAU,KAAA,EAAA,QAAA,CAAA;AAAA,OAAA,EAAA,CAAAuM,WAAA,CAAAC,WAAA,EAAAC,UAAA,CAAA;QAGxBC,WAAWpO,MAAM,CAAAoO,SAAA;QACjBC,UAAUzN,UAAW,CAAAc,KAAA;QACrB4M,YAAYtO,MAAM,CAAAsO,UAAA;QAClB3K,UAAU3D,MAAM,CAAA2D,QAAA;QAChB4K,WAAWvO,MAAM,CAAAuO,SAAA;QACjBlD,SAASrL,MAAM,CAAAqL,OAAA;QACfmD,QAAQxO,MAAM,CAAAwO,MAAA;QACdC,MAAMzO,MAAM,CAAAyO,IAAA;QACZ1I,iBAAiB/F,MAAM,CAAA+F,eAAA;QACvB2I,WAAW1O,MAAM,CAAA0O,SAAA;QACjBC,QAAQ3O,MAAM,CAAA2O,MAAA;QACdzO,qBAAqBF,MAAM,CAAAE,mBAAAA;AAAA,OAAA,EAAA;AAAA,QAAA,KAAA,EAExB0C,cACL;QAAA,OAAO5B,EAAAA,cAAe,CAAAU,KAAA;QAAA,OACf2D,EAAAA,WAAA,CAAY3D,KACnB;QAAA,UAAUhB,EAAAA,UAAW,CAAAgB,KAAA;QAAA,cACPqD,EAAAA,iBAAkB,CAAArD,KAAA;QAAA,YACpBqD,EAAAA,iBAAA,CAAkBrD,KAAQ,GAAAO,eAAA,CAAgBP,KAAQ,GAAA,EAAA;AAAA,QAAA,aAAA,EAAA,EAAA,CAAAqI,MAAA,CAC9C9E,eAAA,CAAgBvD,KAChC,CAAA;QAAA,YAAY0E,EAAAA,YAAa,CAAA1E,KAAA;QAAA,iBACR1B,EAAAA,MAAAA,CAAM4O;;UAErBvF,MAAMrJ,MAAM,CAAAqJ,IAAA;UACZqF,WAAW1O,MAAM,CAAA0O,SAAAA;SACb1O,EAAAA,MAAM,CAAA6O,UAAA,CAAA,EAAA,EAAA,EAAA;AACVC,UAAAA,SAAW,EAAAvG,aAAAA;AAAA,SAAA,CAAA;AAAA,QAAA,eAAA,EAAAtI,aAAA,CAAA;UAGXoJ,MAAMrJ,MAAM,CAAAqJ,IAAAA;SACRrJ,EAAAA,MAAM,CAAA+O,aAAA,CAAA;AAAA,QAAA,aAAA,EAEC,SAAAC,WAAAA,CAAC5K,GAAA,EAAK6K,GAAQ,EAAA;AACzBpJ,UAAAA,SAAA,CAAUoJ,IAAIrJ,KAAK,CAAA,CAAA;;sCAEL5F,MAAM,CAAAkP,QAAA,CAAA;QAAA,YAAAjP,EAAAA,aAAA,CAAAA,aAAA,CAAA;UAEpB4N,gBAAkB,EAAA,IAAA9D,MAAA,CAAI/I,cAAA,CAAeU,sBAAmBmM,gBAAgB,CAAA;AAAA,SAAA,EACrEC,cAAA,CAAA,EAAA,EAAA,EAAA;AACHvC,UAAAA,gBAAkB,EAAAhB,0BAAAA;AAAA,SAAA,CAAA;QAAA,OAEbvK,EAAAA,MAAAA,CAAMkD,KACb;QAAA,YAAYlD,EAAAA,MAAM,CAAAmP,UAAA;QAAA,QACVnP,EAAAA,MAAAA,CAAM2O,MACd;QAAA,YAAY,EAAA,SAAAS,aAAM;AACZpP,UAAAA,IAAAA,MAAAA,CAAMoP,UAAc,IAAA9O,KAAA,CAAM8O,UAAY,EAAA;YACxC,OAAOtO,eAAe,YAAY,CAAA,CAAA;AACpC,WAAA;AAGEd,UAAAA,OAAAA,MAAAA,CAAMqP,SACJ,IAAApB,WAAA,CAAAqB,SAAA,EAAA;AAAA,YAAA,kBAAA,EAAA,EAAA,CAAAvF,MAAA,CACuB/I,cAAe,CAAAU,KAAA,EAAA,cAAA,CAAA;AAAA,YAAA,UAAA,EAC1BqD,iBAAA,CAAkBrD,KAAAA;WAC9B,EAAA,IAAA,CAAA,CAAA;SAIN;AAAA,QAAA,cAAA,EAAc,SAAA6N,YAAA,GAAA;UAAA,OACZzO,cAAA,CAAe,cAAgB,EAAA;YAC7B4E,QAAQH,kBAAmB,CAAA7D,KAAAA;AAC7B,WAAC,CAEH,CAAA;AAAA,SAAA;AAAA,QAAA,sBAAA,EAAsB4I,yBACtB;AAAA,QAAA,eAAA,EAAenB;iBACN,EAAA,SAAAqG,OAAAC,CAAAA,KAAA,EAAW;AAAA,UAAA,IAAAC,eAAA,CAAA;AAAA,UAAA,IAAR/I,CAAA,GAAA8I,KAAA,CAAA9I,CAAA,CAAA;UACV5C,aAAA,CAAc/D,MAAM,CAAA2D,QAAA,GAAW,EAAC,GAAI,KAAW,CAAA,EAAA;AAC7CG,YAAAA,MAAQ,EAAA,IAAA;YACRU,iBAAiBC,kBAAmBzE,CAAAA,MAAAA,CAAM2D,QAAW,GAAA,KAAK,KAAS,CAAA,CAAA;AACnEsD,YAAAA,OAAS,EAAA,OAAA;AACTN,YAAAA,CAAA,EAAAA,CAAAA;AACF,WAAC,CAAA,CAAA;AACD3G,UAAAA,CAAAA,eAAAA,GAAAA,MAAM,CAAAwP,OAAA,MAAA,IAAA,IAAAE,eAAA,KAAA,KAAA,CAAA,IAAN1P,eAAAA,CAAAA,IAAAA,CAAAA,MAAM,EAAU;AAAE2G,YAAAA,CAAA,EAAAA,CAAAA;AAAE,WAAC,CAAA,CAAA;;mBAEd,SAAAgJ,OAAAA,CAACnO,WAAY,EAAAoO,KAAA,EAAU;AAAA,UAAA,IAARjJ,UAAAA;AAEtBkJ,UAAAA,UAAA,CAAW,YAAM;AAAA,YAAA,IAAAC,eAAA,CAAA;AACf9P,YAAAA,CAAAA,eAAAA,GAAAA,MAAAA,CAAM2P,OAAU,MAAA,IAAA,IAAAG,eAAA,KAAA,KAAA,CAAA,IAAhB9P,eAAAA,CAAAA,IAAAA,CAAAA,MAAAA,EAAgB;AAAEwB,cAAAA,UAAY,KAAAuI,MAAA,CAAG9H,eAAgB,CAAAP,KAAA,CAAA;AAASiF,cAAAA,CAAG,EAAHA,CAAG;cAAAjF,KAAA,EAAOgC,UAAW,CAAAhC,KAAAA;AAAM,aAAC,CAAA,CAAA;AACzE0F,YAAAA,YAAA,EAAA,CAAA;aACZ,CAAC,CAAA,CAAA;;kBAEE,SAAAiD,MAAAA,CAAC7I,WAAY,EAAAuO,KAAA,EAAU;AAAA,UAAA,IAAAC,eAAA,CAAA;AAAA,UAAA,IAARrJ,UAAAA;AACrB3G,UAAAA,CAAAA,eAAAA,GAAAA,OAAMqK,MAAS,MAAA,IAAA,IAAA2F,eAAA,KAAA,KAAA,CAAA,IAAfhQ,eAAAA,CAAAA,IAAAA,CAAAA,QAAe;AAAE2G,YAAAA,GAAAA;YAAGjF,KAAO,EAAAgC,UAAA,CAAWhC,KAAAA;AAAM,WAAC,CAAA,CAAA;;mBAEtC,SAAAuO,OAAAA,CAACzO,WAAY,EAAA0O,MAAA,EAAU;AAAA,UAAA,IAAAC,eAAA,CAAA;AAAA,UAAA,IAARxJ,WAAAA;AACtB3G,UAAAA,CAAAA,eAAAA,GAAAA,OAAMiQ,OAAU,MAAA,IAAA,IAAAE,eAAA,KAAA,KAAA,CAAA,IAAhBnQ,eAAAA,CAAAA,IAAAA,CAAAA,QAAgB;AAAE2G,YAAAA,GAAAA;YAAGjF,KAAO,EAAAgC,UAAA,CAAWhC,KAAAA;AAAM,WAAC,CAAA,CAAA;AAChD,SAAA;OACK1B,EAAAA,MAAM,CAAAoQ,gBAAA,CACF,EAAA;QACPlN,OAAO5C,KAAM,CAAA4C,KAAA;QACbiM,YAAY7O,KAAM,CAAA6O,UAAA;QAClBR,QAAQrO,KAAM,CAAAqO,MAAA;QACd0B,OAAO,SAAPA;;iBAES3N,EAAAA,cAAAA;WACD4N,EAAAA,KAAOtQ,MAAO,EAAA,CAChB,MAAA,EACA,UAAA,EACA,OAAA,EACA,SAAA,EACA,aAAA,EACA,YAAA,EACA,WAAA,EACA,iBAAA,EACA,oBAAA,EACA,QAAA,EACA,QAAA,CACD,CACD,EAAA;AAAA,YAAA,YAAA,EAAYiC,eAAgB,CAAAP,KAAAA;AAAA,WAAA,CAAA,EACnBpB,KACX,CAAA,CAAA;SAAA;QAEFsO,gBAAgBtO,KAAM,CAAAsO,cAAAA;OACxB,CAAA,CAAA,CAAA,CAAA;KAIR,CAAA;AACF,GAAA;AACF,CAAC,CAAA;;;;"}